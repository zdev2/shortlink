{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../src/DragndropPlugin.ts","../../../node_modules/.pnpm/@antv+util@3.3.5/node_modules/@antv/util/esm/path/util/distance-square-root.js","../src/index.ts","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/inherits.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import _typeof from \"./typeof.js\";\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  };\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nexport { _regeneratorRuntime as default };","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import type {\n  DisplayObject,\n  FederatedPointerEvent,\n  IDocument,\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '@antv/g-lite';\nimport { distanceSquareRoot } from '@antv/util';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class DragndropPlugin implements RenderingPlugin {\n  static tag = 'Dragndrop';\n\n  constructor(public dragndropPluginOptions: DragndropPluginOptions) {}\n\n  apply(context: RenderingPluginContext) {\n    const { renderingService, renderingContext } = context;\n    const document = renderingContext.root.ownerDocument;\n\n    // TODO: should we add an option like `draggable` to Canvas\n    const canvas = document.defaultView;\n\n    const handlePointerdown = (event: FederatedPointerEvent) => {\n      const target = event.target as DisplayObject;\n      const isDocument = (target as unknown as IDocument) === document;\n\n      const draggableEventTarget =\n        isDocument && this.dragndropPluginOptions.isDocumentDraggable\n          ? document\n          : target.closest && target.closest('[draggable=true]');\n\n      // `draggable` may be set on ancestor nodes:\n      // @see https://github.com/antvis/G/issues/1088\n      if (draggableEventTarget) {\n        // delay triggering dragstart event\n        let dragstartTriggered = false;\n        const dragstartTimeStamp = event.timeStamp;\n        const dragstartClientCoordinates: [number, number] = [\n          event.clientX,\n          event.clientY,\n        ];\n\n        let currentDroppable = null;\n        let lastDragClientCoordinates = [event.clientX, event.clientY];\n        // @ts-ignore\n        // eslint-disable-next-line no-inner-declarations\n        const handlePointermove = async (event: FederatedPointerEvent) => {\n          if (!dragstartTriggered) {\n            const timeElapsed = event.timeStamp - dragstartTimeStamp;\n            const distanceMoved = distanceSquareRoot(\n              [event.clientX, event.clientY],\n              dragstartClientCoordinates,\n            );\n            // check thresholds\n            if (\n              timeElapsed <=\n                this.dragndropPluginOptions.dragstartTimeThreshold ||\n              distanceMoved <=\n                this.dragndropPluginOptions.dragstartDistanceThreshold\n            ) {\n              return;\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragstart_event\n            event.type = 'dragstart';\n\n            draggableEventTarget.dispatchEvent(event);\n            dragstartTriggered = true;\n          }\n\n          // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drag_event\n          event.type = 'drag';\n          // @ts-ignore\n          event.dx = event.clientX - lastDragClientCoordinates[0];\n          // @ts-ignore\n          event.dy = event.clientY - lastDragClientCoordinates[1];\n          draggableEventTarget.dispatchEvent(event);\n          lastDragClientCoordinates = [event.clientX, event.clientY];\n\n          if (!isDocument) {\n            const point =\n              this.dragndropPluginOptions.overlap === 'pointer'\n                ? [event.canvasX, event.canvasY]\n                : target.getBounds().center;\n            const elementsBelow = await document.elementsFromPoint(\n              point[0],\n              point[1],\n            );\n\n            // prevent from picking the dragging element\n            const elementBelow =\n              elementsBelow[elementsBelow.indexOf(target) + 1];\n\n            const droppableBelow =\n              elementBelow?.closest('[droppable=true]') ||\n              (this.dragndropPluginOptions.isDocumentDroppable\n                ? document\n                : null);\n            if (currentDroppable !== droppableBelow) {\n              if (currentDroppable) {\n                // null when we were not over a droppable before this event\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragleave';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n\n              if (droppableBelow) {\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragenter';\n                event.target = droppableBelow;\n                droppableBelow.dispatchEvent(event);\n              }\n\n              currentDroppable = droppableBelow;\n              if (currentDroppable) {\n                // null if we're not coming over a droppable now\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragover_event\n                event.type = 'dragover';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n            }\n          }\n        };\n\n        canvas.addEventListener('pointermove', handlePointermove);\n\n        const stopDragging = function (\n          originalPointerUpEvent: FederatedPointerEvent,\n        ) {\n          if (dragstartTriggered) {\n            // prevent click event being triggerd\n            // @see https://github.com/antvis/G/issues/1091\n            originalPointerUpEvent.detail = {\n              preventClick: true,\n            };\n\n            // clone event first\n            const event = originalPointerUpEvent.clone();\n\n            // drop should fire before dragend\n            // @see https://javascript.tutorialink.com/is-there-a-defined-ordering-between-dragend-and-drop-events/\n\n            if (currentDroppable) {\n              // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drop_event\n              event.type = 'drop';\n              event.target = currentDroppable;\n              currentDroppable.dispatchEvent(event);\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragend_event\n            event.type = 'dragend';\n            draggableEventTarget.dispatchEvent(event);\n\n            dragstartTriggered = false;\n          }\n\n          canvas.removeEventListener('pointermove', handlePointermove);\n        };\n\n        target.addEventListener('pointerup', stopDragging, { once: true });\n        target.addEventListener('pointerupoutside', stopDragging, {\n          once: true,\n        });\n      }\n    };\n\n    renderingService.hooks.init.tap(DragndropPlugin.tag, () => {\n      canvas.addEventListener('pointerdown', handlePointerdown);\n    });\n\n    renderingService.hooks.destroy.tap(DragndropPlugin.tag, () => {\n      canvas.removeEventListener('pointerdown', handlePointerdown);\n    });\n  }\n}\n","export function distanceSquareRoot(a, b) {\n    return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]));\n}\n//# sourceMappingURL=distance-square-root.js.map","import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { DragndropPlugin } from './DragndropPlugin';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'dragndrop';\n\n  constructor(private options: Partial<DragndropPluginOptions> = {}) {\n    super();\n  }\n\n  init(): void {\n    this.addRenderingPlugin(\n      new DragndropPlugin({\n        overlap: 'pointer',\n        isDocumentDraggable: false,\n        isDocumentDroppable: false,\n        dragstartDistanceThreshold: 0,\n        dragstartTimeThreshold: 0,\n        ...this.options,\n      }),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n  setOptions(options: Partial<DragndropPluginOptions>): void {\n    Object.assign(\n      (this.plugins[0] as DragndropPlugin).dragndropPluginOptions,\n      options,\n    );\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_classCallCheck","a","n","_defineProperties","length","key","_createClass","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_setPrototypeOf","_regeneratorRuntime","hasOwnProperty","c","asyncIterator","u","toStringTag","define","wrap","create","Generator","Context","makeInvokeMethod","tryCatch","type","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","name","mark","awrap","async","Promise","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","DragndropPlugin","dragndropPluginOptions","context","_this","renderingService","document","renderingContext","root","ownerDocument","canvas","defaultView","handlePointerdown","event","target","isDocument","draggableEventTarget","isDocumentDraggable","closest","dragstartTriggered","dragstartTimeStamp","timeStamp","dragstartClientCoordinates","clientX","clientY","currentDroppable","lastDragClientCoordinates","handlePointermove","_ref","_callee","timeElapsed","distanceMoved","point","elementsBelow","elementBelow","droppableBelow","_context","Math","sqrt","b","dragstartTimeThreshold","dragstartDistanceThreshold","dispatchEvent","dx","dy","overlap","canvasX","canvasY","getBounds","center","elementsFromPoint","indexOf","isDocumentDroppable","arguments","_next","_throw","_x","addEventListener","stopDragging","originalPointerUpEvent","detail","preventClick","clone","removeEventListener","once","hooks","init","tap","tag","destroy","Plugin","_AbstractRendererPlug","options","undefined","possibleConstructorReturn","isNativeReflectConstruct","_inherits","addRenderingPlugin","getOwnPropertyDescriptors","defineProperties","_objectSpread","removeAllRenderingPlugins","assign","plugins","AbstractRendererPlugin"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,15,17,18]}