{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../src/dom/AnimationEvent.ts","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/callSuper.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/inherits.js","../src/dom/Animation.ts","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../src/utils/bezier-easing.ts","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../../../node_modules/.pnpm/@babel+runtime@7.25.6/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../../../node_modules/.pnpm/@antv+util@3.3.5/node_modules/@antv/util/esm/lodash/is-nil.js","../../../node_modules/.pnpm/@antv+util@3.3.5/node_modules/@antv/util/esm/lodash/is-type.js","../../../node_modules/.pnpm/@antv+util@3.3.5/node_modules/@antv/util/esm/lodash/clamp.js","../../../node_modules/.pnpm/@antv+util@3.3.5/node_modules/@antv/util/esm/lodash/is-number.js","../src/utils/custom-easing.ts","../src/utils/animation.ts","../src/utils/interpolation.ts","../src/dom/AnimationEffectTiming.ts","../src/dom/KeyframeList.ts","../src/dom/KeyframeEffect.ts","../src/dom/AnimationTimeline.ts","../src/index.ts"],"sourcesContent":["function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nexport { _classCallCheck as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return assertThisInitialized(t);\n}\nexport { _possibleConstructorReturn as default };","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nfunction _callSuper(t, o, e) {\n  return o = getPrototypeOf(o), possibleConstructorReturn(t, isNativeReflectConstruct() ? Reflect.construct(o, e || [], getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nexport { _callSuper as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && setPrototypeOf(t, e);\n}\nexport { _inherits as default };","import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nexport { _arrayLikeToArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nexport { _unsupportedIterableToArray as default };","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nfunction _toConsumableArray(r) {\n  return arrayWithoutHoles(r) || iterableToArray(r) || unsupportedIterableToArray(r) || nonIterableSpread();\n}\nexport { _toConsumableArray as default };","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nfunction _arrayWithoutHoles(r) {\n  if (Array.isArray(r)) return arrayLikeToArray(r);\n}\nexport { _arrayWithoutHoles as default };","function _iterableToArray(r) {\n  if (\"undefined\" != typeof Symbol && null != r[Symbol.iterator] || null != r[\"@@iterator\"]) return Array.from(r);\n}\nexport { _iterableToArray as default };","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableSpread as default };","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nexport { _slicedToArray as default };","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nexport { _arrayWithHoles as default };","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nexport { _iterableToArrayLimit as default };","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nexport { _nonIterableRest as default };","// isFinite,\nvar isNil = function (value) {\n    /**\n     * isNil(null) => true\n     * isNil() => true\n     */\n    return value === null || value === undefined;\n};\nexport default isNil;\n//# sourceMappingURL=is-nil.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","/**\n * 判断是否数字\n * @return {Boolean} 是否数字\n */\nimport isType from './is-type';\nvar isNumber = function (value) {\n    return isType(value, 'Number');\n};\nexport default isNumber;\n//# sourceMappingURL=is-number.js.map","/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n","import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n","import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n","import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n","import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n","import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    // 不支持 proxy 时降级成 this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n","import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n"],"names":["_classCallCheck","a","n","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","length","enumerable","configurable","writable","Object","defineProperty","key","_createClass","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_possibleConstructorReturn","ReferenceError","assertThisInitialized","_setPrototypeOf","AnimationEvent","_FederatedEvent","manager","target","currentTime","timelineTime","_this","possibleConstructorReturn","isNativeReflectConstruct","apply","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","create","value","_inherits","FederatedEvent","sequenceNumber","Animation","effect","timeline","_this$effect","this","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","concat","_inEffect","update","_totalDuration","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","get","_startTime","playbackRate","_isFinished","readyPromise","animationsWithPromises","indexOf","push","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","_this2","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","_this$timeline","restart","tickCurrentTime","applyDirtiedAnimation","oldCurrentTime","startTime","ensureAlive","newPlayState","undefined","rewind","animations","_this3","oncancel","event","setTimeout","play","_this$effect2","getAnimations","targetAnimations","index","splice","isAnimationFrame","fireEvents","Infinity","ERROR_MSG_METHOD_NOT_IMPLEMENTED","listener","options","_this$effect3","_this$effect4","ignoreLimit","baseTime","_this4","onfinish","onframe","_arrayLikeToArray","Array","_unsupportedIterableToArray","arrayLikeToArray","toString","slice","name","from","test","_toConsumableArray","isArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","bezier","mX1","mY1","mX2","mY2","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aA","aB","currentX","currentT","Math","abs","binarySubdivide","aGuessT","currentSlope","newtonRaphsonIterate","_slicedToArray","arrayWithHoles","l","u","f","next","done","iterableToArrayLimit","nonIterableRest","isNil$1","isType$1","clamp$1","min","max","isNumber$1","isType","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","b","Elastic","_params","arguments","_params$","_params$2","period","clamp","p","sin","asin","Spring","duration","_params2","_params2$","mass","_params2$2","stiffness","_params2$3","damping","_params2$4","velocity","w0","zeta","wd","progress","exp","Steps","_ref2","_ref2$","steps","ceil","floor","Bezier","_params3","easein","EaseOut","ease","EaseInOut","params","EaseOutIn","EasingFunctions","linear","in","out","spring","getEasingFunction","str","replace","letter","toLowerCase","charAt","substring","trim","complexEasingSyntax","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","_timing$iterations","iterations","repeatedDuration","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculateIterationProgress","activeDuration","localTime","phase","delay","endDelay","calculatePhase","activeTime","fillMode","calculateActiveTime","fill","overallProgress","iterationDuration","iterationStart","calculateOverallProgress","simpleIterationProgress","calculateSimpleIterationProgress","currentIteration","calculateCurrentIteration","directedProgress","playbackDirection","currentDirection","d","calculateDirectedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","member","isNotReservedWord","propertySpecificKeyframe","offset","computedOffset","easing","makePropertySpecificKeyframeGroups","interpolations","groupName","startIndex","endIndex","startOffset","endOffset","applyFrom","applyTo","property","interpolation","propertyInterpolation","sort","leftInterpolation","rightInterpolation","makeInterpolations","fraction","filter","forEach","localDuration","setAttribute","InterpolationFactory","to","convertToString","interpolated","interpolate","isNumber","left","right","metadata","propertyMetadataCache","syntax","propertyHandler","runtime","styleValueRegistry","getPropertySyntax","parser","usedLeft","usedRight","interpolationArgs","mixer","interp","bool","fromLength","toLength","AnimationEffectTiming","_easing","normalizeKeyframes","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","convertToArrayForm","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","_keyframes$offset","_keyframes$0$offset","previousIndex","j","spaceKeyframes","fills","split","directions","makeTiming","timingInput","forGroup","keys","normalizeTimingInput","_timingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","timeFraction","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","tick","entry","applyPendingEffects","restartWebAnimationsNextTick","markTarget","defaultView","cancelAnimationFrame","frameId","applyInterpolations","updateAnimationsPromises","rAF","updatingAnimations","_this$pendingEffects","_this$pendingEffects2","newPendingClears","newPendingEffects","activeAnimations","inactiveAnimations","unmarkTarget","_needsTick","alive","EasingFunction","gLite"],"mappings":";;;;;;;;4TAAA,SAASA,EAAgBC,EAAGC,GAC1B,KAAMD,aAAaC,GAAI,MAAM,IAAIC,UAAU,oCAC7C,CCFA,SAASC,EAAQC,GAGf,OAAOD,EAAU,mBAAqBE,QAAU,iBAAmBA,OAAOC,SAAW,SAAUF,GAC7F,cAAcA,CACf,EAAG,SAAUA,GACZ,OAAOA,GAAK,mBAAqBC,QAAUD,EAAEG,cAAgBF,QAAUD,IAAMC,OAAOG,UAAY,gBAAkBJ,CACtH,EAAKD,EAAQC,EACb,CCNA,SAASK,EAAcC,GACrB,IAAIC,ECFN,SAAqBD,EAAGE,GACtB,GAAI,UAAYT,EAAQO,KAAOA,EAAG,OAAOA,EACzC,IAAIG,EAAIH,EAAEL,OAAOS,aACjB,QAAI,IAAWD,EAAG,CAChB,IAAIF,EAAIE,EAAEE,KAAKL,EAAGE,GAAK,WACvB,GAAI,UAAYT,EAAQQ,GAAI,OAAOA,EACnC,MAAM,IAAIT,UAAU,+CACrB,CACD,OAAQ,WAAaU,EAAII,OAASC,QAAQP,EAC5C,CDPUI,CAAYJ,EAAG,UACvB,MAAO,UAAYP,EAAQQ,GAAKA,EAAIA,EAAI,EAC1C,CEJA,SAASO,EAAkBL,EAAGD,GAC5B,IAAK,IAAIF,EAAI,EAAOE,EAAEO,OAANT,EAAcA,IAAK,CACjC,IAAIN,EAAIQ,EAAEF,GACVN,EAAEgB,WAAahB,EAAEgB,aAAc,EAAIhB,EAAEiB,cAAe,EAAI,UAAWjB,IAAMA,EAAEkB,UAAW,GAAKC,OAAOC,eAAeX,EAAGJ,EAAcL,EAAEqB,KAAMrB,EAC3I,CACH,CACA,SAASsB,EAAab,EAAGD,EAAGF,GAC1B,OAAOE,GAAKM,EAAkBL,EAAEL,UAAWI,GAAIF,GAAKQ,EAAkBL,EAAGH,GAAIa,OAAOC,eAAeX,EAAG,YAAa,CACjHS,UAAU,IACRT,CACN,CCXA,SAASc,EAAgBjB,GACvB,OAAOiB,EAAkBJ,OAAOK,eAAiBL,OAAOM,eAAeC,OAAS,SAAUpB,GACxF,OAAOA,EAAEqB,WAAaR,OAAOM,eAAenB,EAChD,EAAKiB,EAAgBjB,EACrB,CCJA,SAASsB,IACP,IACE,IAAItB,GAAKuB,QAAQzB,UAAU0B,QAAQnB,KAAKoB,QAAQC,UAAUH,QAAS,IAAI,WAAY,IACvF,CAAI,MAAOvB,GAAK,CACd,OAAQsB,EAA4B,WAClC,QAAStB,CACb,IACA,CCLA,SAAS2B,EAA2B3B,EAAGG,GACrC,GAAIA,IAAM,UAAYV,EAAQU,IAAM,mBAAqBA,GAAI,OAAOA,EACpE,QAAI,IAAWA,EAAG,MAAM,IAAIX,UAAU,4DACtC,OCLF,SAAgCW,GAC9B,QAAI,IAAWA,EAAG,MAAM,IAAIyB,eAAe,6DAC3C,OAAOzB,CACT,CDES0B,CAAsB7B,EAC/B,CENA,SAAS8B,EAAgB9B,EAAGG,GAC1B,OAAO2B,EAAkBjB,OAAOK,eAAiBL,OAAOK,eAAeE,OAAS,SAAUpB,EAAGG,GAC3F,OAAOH,EAAEqB,UAAYlB,EAAGH,CAC5B,EAAK8B,EAAgB9B,EAAGG,EACxB,CCIa4B,IAAAA,WAAcC,GAIzB,SAAAD,EACEE,EACAC,EACOC,EACAC,GACP,IAAAC,ECdgBrC,EAAGN,EAAGS,ED2BW,OAbjCd,OAAA0C,GCdgB/B,EDehB+B,KCfsB5B,GDehB8B,GCdDvC,EAAIyB,EADUzB,EDenBqC,IAAAM,ECd4BC,EAA0BtC,EAAGuC,IAA6Bd,QAAQC,UAAUhC,EAAGS,GAAK,GAAIgB,EAAenB,GAAGH,aAAeH,EAAE8C,MAAMxC,EAAGG,KDWzJgC,YAAAA,EAA0BE,EAC1BD,aAAAA,EAKPC,EAAKH,OAASA,EACdG,EAAKI,KAAO,SACZJ,EAAKK,SAAU,EAEfL,EAAKM,cAAgBT,EACrBG,EAAKO,kBAAmB,EACxBP,EAAKQ,WAAaR,EAAKS,UACvBT,EAAKU,UAAYC,KAAKC,MACtBZ,EAAKF,YAAcA,EACnBE,EAAKD,aAAeA,EAAaC,CACnC,CAAC,OE9BH,SAAmBrC,EAAGG,GACpB,GAAI,mBAAqBA,GAAK,OAASA,EAAG,MAAM,IAAIX,UAAU,sDAC9DQ,EAAEF,UAAYe,OAAOqC,OAAO/C,GAAKA,EAAEL,UAAW,CAC5CD,YAAa,CACXsD,MAAOnD,EACPY,UAAU,EACVD,cAAc,KAEdE,OAAOC,eAAed,EAAG,YAAa,CACxCY,UAAU,IACRT,GAAKe,EAAelB,EAAGG,EAC7B,CFmBGiD,CAAArB,EAAAC,GAAAhB,EAAAe,EAAA,EAtBOsB,EAAcA,gBGHpBC,EAAiB,EAKRC,EAAS,WAuPpB,OAAAvC,GAdA,SAAAuC,EAAYC,EAAwBC,GAA6B,IAAAC,EAAArE,OAAAkE,GAAAI,KA9MzDC,oBAAqB,EAK7BD,KACQE,OAAQ,EAAIF,KACZG,SAAU,EAAKH,KACfI,eAAgB,EAsGxBJ,KAGQK,aAAe,EAACL,KAgDhBM,cAAgB,EAACN,KAwCzBO,aAAc,EAMZP,KAAKH,OAASA,EACdA,EAAOW,UAAYR,KACnBA,KAAKF,SAAWA,EAChBE,KAAKS,GAAE,GAAAC,OAAMf,KAEbK,KAAKW,YAAcX,KAAKH,OAAOe,OAAO,GACtCZ,KAAKa,eAAiBjE,eAAMmD,EAACC,KAAKH,cAAM,IAAAE,OAAA,EAAXA,EAAae,oBAAoBC,SAC9Df,KAAKgB,UAAY,EACjBhB,KAAKG,SAAU,EACfH,KAAKiB,aAAe,OACpBjB,KAAKkB,gBACP,GAEA,CAAA,CAAA9D,IAAA,UAAA+D,IAlOA,WACE,OACuB,OAApBnB,KAAKoB,aAAwBpB,KAAKG,SAAiC,IAAtBH,KAAKqB,cACnDrB,KAAKC,kBAET,GAAC,CAAA7C,IAAA,YAAA+D,IAUD,WACE,OAAInB,KAAKE,MAAc,OACnBF,KAAKsB,YAAoB,WACzBtB,KAAKG,QAAgB,SAClB,SACT,GAEA,CAAA/C,IAAA,QAAA+D,IAwBA,WAAY,IAAAzC,EAAAsB,KAiBV,OAhBKA,KAAKuB,gBACoD,IAAxDvB,KAAKF,SAAS0B,uBAAuBC,QAAQzB,OAC/CA,KAAKF,SAAS0B,uBAAuBE,KAAK1B,MAE5CA,KAAKuB,aAAe,IAAII,SAAQ,SAACC,EAASC,GACxCnD,EAAKoD,oBAAsB,WACzBF,EAAQlD,IAEVA,EAAKqD,mBAAqB,WACxBF,EAAWG,SAEf,IACKhC,KAAKiC,SACRjC,KAAK8B,uBAGF9B,KAAKuB,YACd,GAEA,CAAAnE,IAAA,WAAA+D,IAeA,WAAe,IAAAe,EAAAlC,KAiBb,OAhBKA,KAAKmC,mBACoD,IAAxDnC,KAAKF,SAAS0B,uBAAuBC,QAAQzB,OAC/CA,KAAKF,SAAS0B,uBAAuBE,KAAK1B,MAE5CA,KAAKmC,gBAAkB,IAAIR,SAAQ,SAACC,EAASC,GAC3CK,EAAKE,uBAAyB,WAC5BR,EAAQM,IAEVA,EAAKG,sBAAwB,WAC3BR,EAAWG,SAEf,IACuB,aAAnBhC,KAAKsC,WACPtC,KAAKoC,0BAGFpC,KAAKmC,eACd,GAYA,CAAA/E,IAAA,cAAA+D,IASA,WAEE,OADAnB,KAAKkB,iBACElB,KAAKE,OAASF,KAAKC,mBAAqB,KAAOD,KAAKK,YAC5D,EAAAkC,IACD,SAAgBC,GAEd,IAAIC,MADJD,EAAU5F,OAAO4F,IACjB,CAE+C,IAAAE,EAA/C,GADA1C,KAAKF,SAAS6C,WACT3C,KAAKG,SAA+B,OAApBH,KAAKoB,WACxBpB,KAAKoB,WACHxE,OAAoB,QAAd8F,EAAC1C,KAAKF,gBAAL4C,IAAaA,OAAbA,EAAAA,EAAelE,aAAegE,EAAUxC,KAAKqB,aAExDrB,KAAKC,oBAAqB,EACtBD,KAAKK,eAAiBmC,IAGtBxC,KAAKE,QACPF,KAAKE,OAAQ,EACbF,KAAKG,SAAU,GAEjBH,KAAK4C,gBAAgBJ,GAAS,GAC9BxC,KAAKF,SAAS+C,sBAAsB7C,MAfhB,CAgBtB,GAEA,CAAA5C,IAAA,YAAA+D,IAIA,WACE,OAAOnB,KAAKoB,UACb,EAAAmB,IACD,SAAcC,GACZ,GAAgB,OAAZA,EAAkB,CAGpB,GAFAxC,KAAKkB,iBAEDuB,MADJD,EAAU5F,OAAO4F,IACG,OACpB,GAAIxC,KAAKG,SAAWH,KAAKE,MAAO,OAChCF,KAAKoB,WAAaoB,EAClBxC,KAAK4C,iBACFhG,OAAOoD,KAAKF,SAAStB,aAAewB,KAAKoB,YACxCpB,KAAKqB,cAETrB,KAAKF,SAAS+C,sBAAsB7C,MACpCA,KAAKkB,gBACP,CACF,GAAC,CAAA9D,IAAA,eAAA+D,IAGD,WACE,OAAOnB,KAAKM,aACb,EAAAiC,IACD,SAAiB/C,GACf,GAAIA,IAAUQ,KAAKM,cAAnB,CAIAN,KAAKkB,iBACL,IAAM4B,EAAiB9C,KAAKxB,YAC5BwB,KAAKM,cAAgBd,EACrBQ,KAAK+C,UAAY,KACM,WAAnB/C,KAAKsC,WAA6C,SAAnBtC,KAAKsC,YACtCtC,KAAKI,eAAgB,EACrBJ,KAAKE,OAAQ,EACbF,KAAKgD,cACLhD,KAAKF,SAAS+C,sBAAsB7C,OAEf,OAAnB8C,IACF9C,KAAKxB,YAAcsE,GAErB9C,KAAKkB,gBAfL,CAgBF,GAAC,CAAA9D,IAAA,cAAA+D,IAED,WACE,OACGnB,KAAKE,QACJF,KAAKM,cAAgB,GACrB1D,OAAOoD,KAAKK,eAAiBL,KAAKa,gBACZ,EAArBb,KAAKM,eAAkD,GAA7B1D,OAAOoD,KAAKK,cAE7C,GAAC,CAAAjD,IAAA,gBAAA+D,IAGD,WACE,OAAOnB,KAAKa,cACd,GAAC,CAAAzD,IAAA,aAAA+D,IAID,WACE,OAAOnB,KAAKiC,SAA8B,YAAnBjC,KAAKsC,YAA4BtC,KAAKI,aAC/D,GAAC,CAAAhD,IAAA,iBAAAoC,MAoBD,WACE,IAAQyB,EAAiBjB,KAAjBiB,aACFgC,EAAejD,KAAKiC,QAAU,UAAYjC,KAAKsC,UAsBrD,OArBItC,KAAKuB,cAAgB0B,IAAiBhC,IACnB,SAAjBgC,GACFjD,KAAK+B,qBACL/B,KAAKuB,kBAAe2B,GACM,YAAjBjC,EACTjB,KAAK8B,sBACqB,YAAjBmB,IACTjD,KAAKuB,kBAAe2B,IAGpBlD,KAAKmC,iBAAmBc,IAAiBhC,IACtB,SAAjBgC,GACFjD,KAAKqC,wBACLrC,KAAKmC,qBAAkBe,GACG,aAAjBD,EACTjD,KAAKoC,yBACqB,aAAjBnB,IACTjB,KAAKmC,qBAAkBe,IAG3BlD,KAAKiB,aAAegC,EACbjD,KAAKuB,cAAgBvB,KAAKmC,eACnC,GAAC,CAAA/E,IAAA,OAAAoC,MAED,WACEQ,KAAKkB,iBACLlB,KAAKG,SAAU,GACXH,KAAKsB,aAAetB,KAAKE,SAC3BF,KAAKmD,SACLnD,KAAKoB,WAAa,MAEpBpB,KAAKI,eAAgB,EACrBJ,KAAKE,OAAQ,EACbF,KAAKgD,cACLhD,KAAKF,SAAS+C,sBAAsB7C,OAEY,IAA5CA,KAAKF,SAASsD,WAAW3B,QAAQzB,OACnCA,KAAKF,SAASsD,WAAW1B,KAAK1B,MAGhCA,KAAKkB,gBACP,GAAC,CAAA9D,IAAA,QAAAoC,MAED,WACEQ,KAAKkB,iBACDlB,KAAKxB,cACPwB,KAAKgB,UAAYhB,KAAKxB,aAGnBwB,KAAKsB,aAAgBtB,KAAKG,SAAYH,KAAKE,MAErCF,KAAKE,QACdF,KAAKmD,SACLnD,KAAKE,OAAQ,GAHbF,KAAKC,oBAAqB,EAK5BD,KAAKoB,WAAa,KAClBpB,KAAKG,SAAU,EAEfH,KAAKkB,gBACP,GAAC,CAAA9D,IAAA,SAAAoC,MAED,WACEQ,KAAKkB,iBACDlB,KAAKE,QACTF,KAAKxB,YAAcwB,KAAKM,cAAgB,EAAIN,KAAKa,eAAiB,EAClEb,KAAKoB,WAAapB,KAAKa,eAAiBb,KAAKxB,YAC7CwB,KAAKC,oBAAqB,EAC1BD,KAAKF,SAAS+C,sBAAsB7C,MAEpCA,KAAKkB,iBACP,GAAC,CAAA9D,IAAA,SAAAoC,MAED,WAAS,IAAA6D,EAAArD,KAEP,GADAA,KAAKkB,iBACAlB,KAAKW,YACVX,KAAKW,WAAY,EACjBX,KAAKE,OAAQ,EACbF,KAAKG,SAAU,EACfH,KAAKI,eAAgB,EACrBJ,KAAKK,aAAe,EACpBL,KAAKoB,WAAa,KAClBpB,KAAKH,OAAOe,OAAO,MAGnBZ,KAAKF,SAAS+C,sBAAsB7C,MAEpCA,KAAKkB,iBAYDlB,KAAKsD,UAAU,CACjB,IAAMC,EAAQ,IAAInF,EAChB,KACA4B,KACAA,KAAKxB,YACL,MAEFgF,YAAW,WACTH,EAAKC,SAASC,EAChB,GACF,CACF,GAAC,CAAAnG,IAAA,UAAAoC,MAED,WACEQ,KAAKkB,iBACL,IAAM4B,EAAiB9C,KAAKxB,YAE5BwB,KAAKqB,eAAiB,EACtBrB,KAAKyD,OAEkB,OAAnBX,IACF9C,KAAKxB,YAAcsE,GAErB9C,KAAKkB,gBACP,GAEA,CAAA9D,IAAA,qBAAAoC,MAGA,SAAmB6B,GACjBrB,KAAKqB,aAAeA,CACtB,GAAC,CAAAjE,IAAA,mBAAAoC,MAED,WAAmB,IAAAkE,EAEjB,OAD0B,QAAdA,EAAG1D,KAAKH,cAAM,IAAA6D,OAAA,EAAXA,EAAanF,QACdoF,eAChB,GAAC,CAAAvG,IAAA,aAAAoC,MACD,WACE,IAAM4D,EAAapD,KAAK4D,oBACU,IAA9BR,EAAW3B,QAAQzB,OACrBoD,EAAW1B,KAAK1B,KAEpB,GAAC,CAAA5C,IAAA,eAAAoC,MACD,WACE,IAAM4D,EAAapD,KAAK4D,mBAClBC,EAAQT,EAAW3B,QAAQzB,OAClB,IAAX6D,GACFT,EAAWU,OAAOD,EAAO,EAE7B,GAAC,CAAAzG,IAAA,OAAAoC,MAED,SAAKf,EAAsBsF,GACpB/D,KAAKE,OAAUF,KAAKG,UACC,OAApBH,KAAKoB,WACH2C,IACF/D,KAAK+C,UAAYtE,EAAeuB,KAAKK,aAAeL,KAAKqB,cAEjDrB,KAAKsB,aACftB,KAAK4C,iBACFnE,EAAeuB,KAAKoB,YAAcpB,KAAKqB,eAK1C0C,IACF/D,KAAKC,oBAAqB,EAC1BD,KAAKgE,WAAWvF,GAEpB,GAAC,CAAArB,IAAA,SAAAoC,MAED,WACE,GAAIQ,KAAKqB,aAAgB,EAElB,IAAIrB,KAAKa,gBAAiBoD,IAG/B,MAAUjC,MACR,4EAHFhC,KAAKxB,YAAcwB,KAAKa,cAK1B,MAPEb,KAAKxB,YAAc,CAQvB,GAAC,CAAApB,IAAA,UAAAoC,MAED,WACE,MAAUwC,MAAMkC,EAAAA,iCAClB,GAAC,CAAA9G,IAAA,mBAAAoC,MAaD,SAAiBV,EAAWqF,EAAeC,GACzC,MAAUpC,MAAMkC,EAAAA,iCAClB,GAAC,CAAA9G,IAAA,sBAAAoC,MAYD,SAAoBV,EAAWqF,EAAeC,GAC5C,MAAUpC,MAAMkC,EAAAA,iCAClB,GAAC,CAAA9G,IAAA,gBAAAoC,MAED,SAAc+D,GACZ,MAAUvB,MAAMkC,EAAAA,iCAClB,GAAC,CAAA9G,IAAA,eAAAoC,MAGD,WACE,MAAUwC,MAAMkC,EAAAA,iCAClB,GAAC,CAAA9G,IAAA,cAAAoC,MAED,WAIuD,IAAA6E,EAE9CC,EAFiB,EAApBtE,KAAKqB,cAAyC,IAArBrB,KAAKxB,YAChCwB,KAAKW,YAAyB0D,QAAZA,EAACrE,KAAKH,kBAAMwE,IAAXA,EAAazD,QAAQ,IAExCZ,KAAKW,oBAAa2D,EAACtE,KAAKH,cAAM,IAAAyE,IAAXA,EAAa1D,OAAOZ,KAAKxB,cAEzCwB,KAAKO,cAAgBP,KAAKW,WAAcX,KAAKI,gBAChDJ,KAAKO,aAAc,EACnBP,KAAKF,SAASsD,WAAW1B,KAAK1B,MAElC,GAAC,CAAA5C,IAAA,kBAAAoC,MAED,SAAwBgD,EAAiB+B,GACnC/B,IAAYxC,KAAKK,eACnBL,KAAKK,aAAemC,EAChBxC,KAAKsB,cAAgBiD,IACvBvE,KAAKK,aAAeL,KAAKM,cAAgB,EAAIN,KAAKa,eAAiB,GAErEb,KAAKgD,cAET,GAAC,CAAA5F,IAAA,aAAAoC,MAED,SAAmBgF,GAAkB,IAAAC,EAAAzE,KACnC,GAAIA,KAAKsB,aACP,IAAKtB,KAAKI,cAAe,CACvB,GAAIJ,KAAK0E,SAAU,CACjB,IAAMnB,EAAQ,IAAInF,EAChB,KACA4B,KACAA,KAAKxB,YACLgG,GAEFhB,YAAW,WACLiB,EAAKC,UACPD,EAAKC,SAASnB,EAElB,GACF,CACAvD,KAAKI,eAAgB,CACvB,MACK,CACL,GAAIJ,KAAK2E,SAA8B,YAAnB3E,KAAKsC,UAAyB,CAChD,IAAMiB,EAAQ,IAAInF,EAChB,KACA4B,KACAA,KAAKxB,YACLgG,GAEFxE,KAAK2E,QAAQpB,EACf,CACAvD,KAAKI,eAAgB,CACvB,CACF,IAAC,CAnhBmB,GCXtB,SAASwE,EAAkBrI,EAAGZ,IAC3B,MAAQA,GAAKA,EAAIY,EAAEO,UAAYnB,EAAIY,EAAEO,QACtC,IAAK,IAAIN,EAAI,EAAGZ,EAAIiJ,MAAMlJ,GAAQA,EAAJa,EAAOA,IAAKZ,EAAEY,GAAKD,EAAEC,GACnD,OAAOZ,CACT,CCHA,SAASkJ,EAA4BvI,EAAGZ,GACtC,GAAIY,EAAG,CACL,GAAI,iBAAmBA,EAAG,OAAOwI,EAAiBxI,EAAGZ,GACrD,IAAIU,EAAI,GAAG2I,SAAStI,KAAKH,GAAG0I,MAAM,GAAI,GACtC,MAAO,WAAa5I,GAAKE,EAAEL,cAAgBG,EAAIE,EAAEL,YAAYgJ,MAAO,QAAU7I,GAAK,QAAUA,EAAIwI,MAAMM,KAAK5I,GAAK,cAAgBF,GAAK,2CAA2C+I,KAAK/I,GAAK0I,EAAiBxI,EAAGZ,QAAK,CACrN,CACH,CCHA,SAAS0J,EAAmB9I,GAC1B,OCJF,SAA4BA,GAC1B,GAAIsI,MAAMS,QAAQ/I,GAAI,OAAOwI,EAAiBxI,EAChD,CDESgJ,CAAkBhJ,IEL3B,SAA0BA,GACxB,GAAI,oBAAsBP,QAAU,MAAQO,EAAEP,OAAOC,WAAa,MAAQM,EAAE,cAAe,OAAOsI,MAAMM,KAAK5I,EAC/G,CFGiCiJ,CAAgBjJ,IAAMkJ,EAA2BlJ,IGLlF,WACE,MAAM,IAAIV,UAAU,uIACtB,CHGwF6J,EACxF,CICO,IAMMC,EAAkB,GAElBC,EAAgD,mBAAjBC,aAE/BC,EAAI,SAACC,EAAaC,GAAW,OAAK,EAAM,EAAMA,EAAM,EAAMD,CAAG,EAC7DE,EAAI,SAACF,EAAaC,GAAW,OAAK,EAAMA,EAAM,EAAMD,CAAG,EACvDG,EAAI,SAACH,GAAW,OAAK,EAAMA,CAAG,EAG9BI,EAAa,SAACC,EAAYL,EAAaC,GAAW,QAC3DF,EAAEC,EAAKC,GAAOI,EAAKH,EAAEF,EAAKC,IAAQI,EAAKF,EAAEH,IAAQK,CAAE,EAG1CC,EAAW,SAACD,EAAYL,EAAaC,GAAW,OAC3D,EAAMF,EAAEC,EAAKC,GAAOI,EAAKA,EAAK,EAAMH,EAAEF,EAAKC,GAAOI,EAAKF,EAAEH,EAAI,EAwClDO,EAAS,SAACC,EAAaC,EAAaC,EAAaC,GAC5D,GAAa,EAAPH,GAAYA,EAAO,GAAY,EAAPE,GAAYA,EAAO,EAC/C,MAAUzE,MAAM,2CAElB,GAAIuE,IAAQC,GAAOC,IAAQC,EAAK,OAAO,SAACrK,GAAS,OAAKA,CAAC,EAMvD,IAHA,IAAMsK,EAAef,EACjB,IAAIC,aA/DsB,kBAiErBvJ,EAAI,EAjEiB,GAiEdA,IAAwBA,EACtCqK,EAAarK,GAAK6J,EAAW7J,EAAIqJ,EAAiBY,EAAKE,GAGzD,IAAMG,EAAW,SAACC,GAKhB,IAJA,IAAIC,EAAgB,EAChBC,EAAgB,EACDC,KAIjBD,GAA+DF,GAA/BF,EAAaI,KAC3CA,EAEFD,GAAiBnB,IACjBoB,EAGF,IAGME,EAAYH,GAFfD,EAAKF,EAAaI,KAClBJ,EAAaI,EAAgB,GAAKJ,EAAaI,IACTpB,EAEnCuB,EAAeb,EAASY,EAAWV,EAAKE,GAC9C,MA7F4B,KA6FxBS,EAEiB,IAAjBA,EAA6BD,EA3EN,SAC7BJ,EACAM,EACAC,EACAb,EACAE,GAEA,IAAIY,EACAC,EACAhL,EAAI,EACR,IAEE+K,EAAWlB,EADXmB,EAAWH,GAAMC,EAAKD,GAAM,EACIZ,EAAKE,GAAOI,GAC7B,EAAKO,EAAKE,EACpBH,EAAKG,QAEVC,KAAKC,IAAIH,GAnCwB,MACK,KAmCpC/K,GAEJ,OAAOgL,CACT,CAyDWG,CACLZ,EACAC,EACAA,EAAgBnB,EAChBY,EACAE,GA5D8B,SAClCI,EACAa,EACAnB,EACAE,GAEA,IAAK,IAAInK,EAAI,EAjDkB,EAiDfA,IAAyBA,EAAG,CAC1C,IAAMqL,EAAetB,EAASqB,EAASnB,EAAKE,GAC5C,GAAqB,IAAjBkB,EAAsB,OAAOD,EAGjCA,IADiBvB,EAAWuB,EAASnB,EAAKE,GAAOI,GAC3Bc,CACxB,CAEA,OAAOD,CACT,CAqCaE,CAAqBf,EAAII,EAAWV,EAAKE,IAYpD,OAAO,SAACpK,GAEN,OAAU,IAANA,GAAiB,IAANA,EAAgBA,EACxB8J,EAAWS,EAASvK,GAAImK,EAAKE,GAExC,ECnHA,SAASmB,EAAetL,EAAGC,GACzB,OCLF,SAAyBD,GACvB,GAAIsI,MAAMS,QAAQ/I,GAAI,OAAOA,CAC/B,CDGSuL,CAAevL,IELxB,SAA+BA,EAAGwL,GAChC,IAAI1L,EAAI,MAAQE,EAAI,KAAO,oBAAsBP,QAAUO,EAAEP,OAAOC,WAAaM,EAAE,cACnF,GAAI,MAAQF,EAAG,CACb,IAAIG,EACFZ,EACAU,EACA0L,EACArM,EAAI,GACJsM,GAAI,EACJlM,GAAI,EACN,IACE,GAAIO,GAAKD,EAAIA,EAAEK,KAAKH,IAAI2L,KAAM,IAAMH,EAAG,CACrC,GAAI7K,OAAOb,KAAOA,EAAG,OACrB4L,GAAI,CACZ,MAAa,OAASA,GAAKzL,EAAIF,EAAEI,KAAKL,IAAI8L,QAAUxM,EAAE+F,KAAKlF,EAAEgD,OAAQ7D,EAAEmB,SAAWiL,GAAIE,GAAI,GACrF,CAAC,MAAO1L,GACPR,GAAI,EAAIH,EAAIW,CAClB,CAAc,QACR,IACE,IAAK0L,GAAK,MAAQ5L,EAAU,SAAM2L,EAAI3L,EAAU,SAAKa,OAAO8K,KAAOA,GAAI,MAC/E,CAAgB,QACR,GAAIjM,EAAG,MAAMH,CACd,CACF,CACD,OAAOD,CACR,CACH,CFrB8ByM,CAAqB7L,EAAGC,IAAMiJ,EAA2BlJ,EAAGC,IGL1F,WACE,MAAM,IAAIX,UAAU,4IACtB,CHGgGwM,EAChG,CILA,IAOAC,EAPY,SAAU9I,GAKlB,OAAOA,OACX,ECPIwF,EAAW,CAAE,EAACA,SAElBuD,EADa,SAAU/I,EAAOV,GAAQ,OAAOkG,EAAStI,KAAK8C,KAAW,WAAaV,EAAO,GAAI,ECQ9F0J,EATY,SAAU7M,EAAG8M,EAAKC,GAC1B,OAAQD,EAAJ9M,EACO8M,EAEF9M,EAAI+M,EACFA,EAEJ/M,CACX,ECAAgN,EAHe,SAAUnJ,GACrB,OAAOoJ,EAAOpJ,EAAO,SACzB,ECaMqJ,EAA2B,SAACxM,GAAC,OAAAkL,KAAAuB,IAAKzM,EAAK,EAAC,EACxC0M,EAA4B,SAAC1M,GAAC,OAAAkL,KAAAuB,IAAKzM,EAAK,EAAC,EACzC2M,EAA4B,SAAC3M,GAAC,OAAAkL,KAAAuB,IAAKzM,EAAK,EAAC,EACzC4M,EAA4B,SAAC5M,GAAC,OAAAkL,KAAAuB,IAAKzM,EAAK,EAAC,EACzC6M,EAA2B,SAAC7M,GAAC,OAAAkL,KAAAuB,IAAKzM,EAAK,EAAC,EACxC8M,EAA2B,SAAC9M,GAAC,OAAK,EAAIkL,KAAK6B,IAAK/M,EAAIkL,KAAK8B,GAAM,EAAE,EACjEC,EAA2B,SAACjN,GAAC,OAAK,EAAIkL,KAAKgC,KAAK,EAAIlN,EAAIA,EAAE,EAC1DmN,EAA2B,SAACnN,GAAC,OAAKA,EAAIA,GAAK,EAAIA,EAAI,EAAE,EAErDoN,EAA6B,SAACpN,GAGlC,IAFA,IAAIqN,EACAC,EAAI,EACDtN,IAAMqN,EAAInC,KAAAuB,IAAG,IAAOa,IAAK,GAAK,KACrC,OAAO,EAACpC,KAAAuB,IAAG,EAAM,EAAIa,GAAK,OAAMpC,KAAAuB,KAAY,EAAPY,EAAW,GAAK,GAAKrN,EAAM,EAClE,EAEMuN,EAA8B,SAACvN,GAAwC,IAC3EwN,EAAAhC,EADiEiC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GACxB,GAAAC,EAAAF,EAAA,GAAxBG,EAAAH,EAAA,GAAEI,OAAS,IAAHD,EAAG,GAAGA,EAC5BrO,EAAIuO,EAAMtN,YADG,IAAHmN,EAAG,EAACA,GACe,EAAG,IAChCI,EAAID,EAAMtN,OAAOqN,GAAS,GAAK,GACrC,OAAU,IAAN5N,GAAiB,IAANA,EAAgBA,GAE5BV,EAAC4L,KAAAuB,IACF,EAAM,IAAMzM,EAAI,IAChBkL,KAAK6C,IAC4D,EAAV7C,KAAK8B,IAAxDhN,EAAI,EAAK8N,GAAe,EAAV5C,KAAK8B,IAAW9B,KAAK8C,KAAK,EAAI1O,IAAuBwO,EAG3E,EAEMG,EAA6B,SACjCjO,GAGG,IADHkO,EAAiBT,UAAAhN,OAAAgN,EAAAA,kBAAA5G,EAEjBsH,EAAA3C,EAH2BiC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GAGsC,GAAAW,EAAAD,EAAA,GAA/DE,OAAO,IAAHD,EAAG,EAACA,EAAAE,EAAAH,EAAA,GAAEI,OAAY,IAAHD,EAAG,IAAGA,EAAAE,EAAAL,EAAA,GAAEM,OAAU,IAAHD,EAAG,GAAEA,EAAAE,EAAAP,EAAA,GAAEQ,OAAW,IAAHD,EAAG,EAACA,EAE1DL,EAAOR,EAAMQ,EAAgB,GAAK,KAClCE,EAAYV,EAAMU,EAAqB,GAAK,KAC5CE,EAAUZ,EAAMY,EAAmB,GAAK,KACxCE,EAAWd,EAAMc,EAAoB,GAAK,KAE1C,IAAMC,EAAK1D,KAAKgC,KAAKqB,EAAYF,GAC3BQ,EAAOJ,GAAW,EAAIvD,KAAKgC,KAAKqB,EAAYF,IAC5CS,EAAY,EAAPD,EAAWD,EAAK1D,KAAKgC,KAAK,EAAI2B,EAAOA,GAAQ,EAElDvB,EAAW,EAAPuB,GAAYA,EAAOD,EAAMD,GAAYG,GAAMH,EAAWC,EAE5DG,EAAWb,EAAYA,EAAWlO,EAAK,IAAOA,EASlD,OAPE+O,EADS,EAAPF,EAEA3D,KAAK8D,KAAKD,EAAWF,EAAOD,IANtB,EAOD1D,KAAK6B,IAAI+B,EAAKC,GAAYzB,EAAIpC,KAAK6C,IAAIe,EAAKC,KAP3C,EASQzB,EAAIyB,GAAY7D,KAAK8D,KAAKD,EAAWH,GAG7C,IAAN5O,GAAiB,IAANA,EAAgBA,EACxB,EAAI+O,CACb,EA8DME,EAA4B,SAACjP,GAA2B,IAC3BkP,EAAA1D,EADiBiC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GACpB,GAAA0B,EAAAD,EAAA,GAA1BE,OAAQ,IAAHD,EAAG,GAAEA,EAEjB,OADuB,UADAD,EAAA,GACUhE,KAAKmE,KAAOnE,KAAKoE,OACrCzB,EAAM7N,EAAG,EAAG,GAAKoP,GAASA,CACzC,EAGMG,EAA6B,SAACvP,GAAqC,IACvEwP,EAAAhE,EAD6DiC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GAC7B,GACnC,OAAOxD,EADGuF,EAAA,GAAKA,EAAA,GAAKA,EAAA,GAAKA,EAAA,GAClBvF,CAA2BjK,EACpC,EAGMyP,EAA6BxF,EAAO,IAAM,EAAK,EAAK,GAGpDyF,EAAU,SAACC,GACf,OAAO,SAAC3P,GAAiC,OACvC,EAAI2P,EAAK,EAAI3P,EADEyN,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GAAqBA,UAAAhN,OAAAgN,EAAAA,kBAAA5G,EACN,CACrC,EAGM+I,EAAY,SAACD,GACjB,OAAO,SAAC3P,GAAC,IAAE6P,EAAMpC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GAAIS,EAAiBT,UAAAhN,OAAAgN,EAAAA,kBAAA5G,EAAA,MACnC,GAAJ7G,EACI2P,EAAS,EAAJ3P,EAAO6P,EAAQ3B,GAAY,EAChC,EAAIyB,GAAU,EAAL3P,EAAS,EAAG6P,EAAQ3B,GAAY,CAAC,CAClD,EAGM4B,EAAY,SAACH,GACjB,OAAO,SAAC3P,GAAsC,IAAnC6P,EAAMpC,UAAAhN,OAAA,QAAAoG,IAAA4G,UAAA,GAAAA,UAAA,GAAG,GAAIS,EAAiBT,UAAAhN,OAAAgN,EAAAA,kBAAA5G,EACvC,MAAW,GAAJ7G,GACF,EAAI2P,EAAK,EAAQ,EAAJ3P,EAAO6P,EAAQ3B,IAAa,GACzCyB,EAAS,EAAJ3P,EAAQ,EAAG6P,EAAQ3B,GAAY,GAAK,EAElD,EA6Da6B,EAAkE,CAC7EX,MAAOH,EACP,aAAc,SAACjP,GAAC,OAAKiP,EAAMjP,EAAG,CAAC,EAAG,SAAS,EAC3C,WAAY,SAACA,GAAC,OAAKiP,EAAMjP,EAAG,CAAC,EAAG,OAAO,EAEvCgQ,OAAQ,SAAChQ,GAAC,OAAKA,CAAC,EAChB,eAAgBuP,EAChBI,KAAM,SAAC3P,GAAC,OAAKuP,EAAOvP,EAAG,CAAC,IAAM,GAAK,IAAM,GAAK,EAE9CiQ,GAAIR,EACJS,IAAKR,EAAQD,GACb,SAAUG,EAAUH,GACpB,SAAUK,EAAUL,GAEpB,UAAWjD,EACX,WAAYkD,EAAQlD,GACpB,cAAeoD,EAAUpD,GACzB,cAAesD,EAAUtD,GAEzB,WAAYE,EACZ,YAAagD,EAAQhD,GACrB,eAAgBkD,EAAUlD,GAC1B,eAAgBoD,EAAUpD,GAE1B,WAAYC,EACZ,YAAa+C,EAAQ/C,GACrB,eAAgBiD,EAAUjD,GAC1B,eAAgBmD,EAAUnD,GAE1B,WAAYC,EACZ,YAAa8C,EAAQ9C,GACrB,eAAgBgD,EAAUhD,GAC1B,eAAgBkD,EAAUlD,GAE1B,UAAWC,EACX,WAAY6C,EAAQ7C,GACpB,cAAe+C,EAAU/C,GACzB,cAAeiD,EAAUjD,GAEzB,UAAWC,EACX,WAAY4C,EAAQ5C,GACpB,cAAe8C,EAAU9C,GACzB,cAAegD,EAAUhD,GAEzB,UAAWG,EACX,WAAYyC,EAAQzC,GACpB,cAAe2C,EAAU3C,GACzB,cAAe6C,EAAU7C,GAEzB,UAAWE,EACX,WAAYuC,EAAQvC,GACpB,cAAeyC,EAAUzC,GACzB,cAAe2C,EAAU3C,GAEzB,YAAaC,EACb,aAAcsC,EAAQtC,GACtB,gBAAiBwC,EAAUxC,GAC3B,gBAAiB0C,EAAU1C,GAE3B,aAAcG,EACd,cAAemC,EAAQnC,GACvB,iBAAkBqC,EAAUrC,GAC5B,iBAAkBuC,EAAUvC,GAE5B4C,OAAQlC,EACR,YAAaA,EACb,aAAcyB,EAAQzB,GACtB,gBAAiB2B,EAAU3B,GAC3B,gBAAiB6B,EAAU7B,IAchBmC,EAAoB,SAACT,GAChC,OAAOI,EATmB,SAACJ,GAAY,OAjTXU,EAkTdV,EA9SW,OAHzBU,EAAMA,EAAIC,QAAQ,YAAY,SAACC,GAAM,MAAA,IAAAlM,OAASkM,EAAOC,cAAa,KAGvDC,OAAO,GAAaJ,EAAIK,UAAU,GAAKL,GA+S/CC,QAAQ,SAAU,IAClBA,QAAQ,YAAa,IACrBE,cACAG,OAtTwB,IAACN,CAsTnB,CAIcO,CAAoBjB,KAAUI,EAAgBC,MACvE,EC9TaA,EAAS,SAACa,GACrB,OAAOA,CACT,EAEMC,EAAQ,EACRC,EAAS,GACTC,EAAM,EAEZ,SAASC,GAAKC,EAAeC,GAC3B,OAAO,SAAUN,GACf,GAAIA,GAAK,EACP,OAAO,EAET,IAAMO,EAAW,EAAIF,EAErB,OADAL,GAAKM,EAAMC,GACCP,EAAIO,EAEpB,CAEA,IAAMC,GAAe,qCACfC,GAAoBC,yBAAMlN,OACZgN,GAAYhN,KAAAA,OAAIgN,GAAY,KAAAhN,OAAIgN,QAAYhN,OAAIgN,GAAY,QAE1EG,GAAU,uBACVC,GAAU,gDAET,SAASC,GACdC,GAEA,IAAMC,EAAYN,GAAcO,KAAKF,GACrC,GAAIC,EAEF,OAAO3H,EAAMzH,WAAAwG,EAAAA,EAAI4I,EAAUhJ,MAAM,GAAGkJ,IAAIvR,UAE1C,IAAMwR,EAAYP,GAAQK,KAAKF,GAC/B,GAAII,EACF,OAAOd,GAAK1Q,OAAOwR,EAAU,IAAKf,GAEpC,IAAMgB,EAAYP,GAAQI,KAAKF,GAC/B,OAAIK,EAEKf,GACL1Q,OAAOyR,EAAU,IACjB,CAAEC,MAAOnB,EAAOoB,OAAQnB,EAAQoB,IAAKnB,GAAMgB,EAAU,KAGlD5B,EAAkBuB,EAC3B,CAEO,SAASS,GAAwBC,GAEtC,OAAOnH,KAAKC,IAGd,SAA0BkH,GAA8B,IAAAC,EAEtD,GAAwB,IAApBD,EAAOnE,UAAwC,IAAtBmE,EAAOE,WAClC,OAAO,EAQT,OACuB,SAApBF,EAAOnE,SAAsB,EAAI3N,OAAO8R,EAAOnE,YAC9BoE,QADuCA,EACxDD,EAAOE,kBAAUD,IAAAA,EAAAA,EAAI,EAE1B,CAlBkBE,CAAiBH,IAAWA,EAAOrN,cAAgB,GACrE,CAmBA,IAAMyN,GAAY,EACZC,GAAc,EACdC,GAAa,EACbC,GAAc,EAiIb,SAASC,GACdC,EACAC,EACAV,GAEA,IAAMW,EApIR,SACEF,EACAC,EACAV,GAGA,GAAkB,OAAdU,EACF,OAAON,GAGT,IAAQ/N,EAAY2N,EAAZ3N,QACR,OAAgBwG,KAAKkB,IAAIiG,EAAOY,MAAOvO,GAAnCqO,EACKL,GAIPxH,KAAKkB,IAAIiG,EAAOY,MAAQH,EAAiBT,EAAOa,SAAUxO,GAD1DqO,EAMKH,GAHED,EAIX,CA8GgBQ,CAAeL,EAAgBC,EAAWV,GAClDe,EA7GR,SACEN,EACAO,EACAN,EACAC,EACAC,GAGA,OAAQD,GACN,KAAKN,GACH,MAAiB,cAAbW,GAAyC,SAAbA,EAA4B,EACrD,KACT,KAAKT,GACH,OAAOG,EAAYE,EACrB,KAAKN,GACH,MAAiB,aAAbU,GAAwC,SAAbA,EAA4BP,EACpD,KACT,KAAKL,GACH,OAAO,KAEb,CAyFqBa,CACjBR,EACAT,EAAOkB,KACPR,EACAC,EACAX,EAAOY,OAET,GAAmB,OAAfG,EAAqB,OAAO,KAEhC,IAAMlF,EAA+B,SAApBmE,EAAOnE,SAAsB,EAAImE,EAAOnE,SACnDsF,EAjGR,SACEC,EACAT,EACAT,EACAa,EACAM,GAGA,IAAIF,EAAkBE,EAQtB,OAP0B,IAAtBD,EACET,IAAUN,KACZc,GAAmBjB,GAGrBiB,GAAmBJ,EAAaK,EAE3BD,CACT,CAgF0BG,CACtBzF,EACA8E,EACAX,EAAOE,WACPa,EACAf,EAAOqB,gBAEHE,EArFR,SACEJ,EACAE,EACAV,EACAT,EACAa,EACAK,GAIA,IAAIG,EACFJ,IAAoB5L,IAAW8L,EAAiB,EAAIF,EAAkB,EASxE,OAP8B,IAA5BI,GACAZ,IAAUL,IACK,IAAfJ,GACgB,IAAfa,GAA0C,IAAtBK,IAErBG,EAA0B,GAErBA,CACT,CAgEkCC,CAC9BL,EACAnB,EAAOqB,eACPV,EACAX,EAAOE,WACPa,EACAlF,GAEI4F,EAtER,SACEd,EACAT,EACAqB,EACAJ,GAGA,OAAIR,IAAUL,IAAcJ,IAAe3K,IAClCA,IAEuB,IAA5BgM,EACK1I,KAAKoE,MAAMkE,GAAmB,EAEhCtI,KAAKoE,MAAMkE,EACpB,CAwD2BO,CACvBf,EACAX,EAAOE,WACPqB,EACAJ,GAGIQ,EA7DR,SACEC,EACAH,EACAF,GAGA,IAAIM,EAAmBD,EACvB,GAA0B,WAAtBA,GAAwD,YAAtBA,EAAiC,CACrE,IAAIE,EAAIL,EACkB,sBAAtBG,IACFE,GAAK,GAEPD,EAAmB,SACfC,IAAMvM,KAAYuM,EAAI,GAAM,IAC9BD,EAAmB,UAEvB,CACA,MAAyB,WAArBA,EACKN,EAEF,EAAIA,CACb,CAwC2BQ,CACvB/B,EAAOgC,UACPP,EACAF,GAQF,OALAvB,EAAOyB,iBAAmBA,EAC1BzB,EAAOtD,SAAWiF,EAIX3B,EAAOiC,eAAeN,EAC/B,CCvPO,SAASO,GACdC,EACAnC,EACAnQ,GAEA,IAAMuS,EAkER,SACED,EACAnC,GAOA,IALA,IAAMoC,EAGF,CAAA,EAEKxU,EAAI,EAAOuU,EAAU/T,OAAdR,EAAsBA,IACpC,IAAK,IAAMyU,KAAUF,EAAUvU,GAC7B,GAAI0U,GAAkBD,GAAS,CAC7B,IAAME,EAA2B,CAC/BC,OAAQL,EAAUvU,GAAG4U,OACrBC,eAAgBN,EAAUvU,GAAG6U,eAC7BC,OAAQP,EAAUvU,GAAG8U,OACrBT,eACE5C,GAAoB8C,EAAUvU,GAAG8U,SAAW1C,EAAOiC,eACrDnR,MAAOqR,EAAUvU,GAAGyU,IAEtBD,EAA+BC,GAC7BD,EAA+BC,IAAW,GAC5CD,EAA+BC,GAAQrP,KAAKuP,EAC9C,CAGJ,OAAOH,CACT,CA7FyCO,CACrCR,EACAnC,GAEI4C,EA2FR,SACER,EACAvS,GAEA,IAAM+S,EAAiB,GACvB,IAAK,IAAMC,KAAaT,EAEtB,IADA,IAAMD,EAAYC,EAA+BS,GACxCjV,EAAI,EAAOuU,EAAU/T,OAAS,EAAvBR,EAA0BA,IAAK,CAC7C,IAAIkV,EAAalV,EACbmV,EAAWnV,EAAI,EACboV,EAAcb,EAAUW,GAAYL,eACpCQ,EAAYd,EAAUY,GAAUN,eAClCS,EAAYF,EACZG,EAAUF,EAEJ,IAANrV,IACFsV,GAAa3N,IACK,IAAd0N,IACFF,EAAWD,IAGXlV,IAAMuU,EAAU/T,OAAS,IAC3B+U,EAAU5N,IACU,IAAhByN,IACFF,EAAaC,IAIjBH,EAAe5P,KAAK,CAClBkQ,UAAAA,EACAC,QAAAA,EACAH,YAAab,EAAUW,GAAYL,eACnCQ,UAAWd,EAAUY,GAAUN,eAC/BR,eAAgBE,EAAUW,GAAYb,eACtCmB,SAAUP,EACVQ,cAAeC,GACbT,EACAV,EAAUW,GAAYhS,MACtBqR,EAAUY,GAAUjS,MACpBjB,IAGN,CAKF,OAHA+S,EAAeW,MAAK,SAACC,EAAmBC,GACtC,OAAOD,EAAkBR,YAAcS,EAAmBT,WAC5D,IACOJ,CACT,CA3IyBc,CACrBtB,EACAvS,GAGF,OAAO,SAAUA,EAAkB8T,GACjC,GAAiB,OAAbA,EACFf,EACGgB,QAAO,SAACP,GACP,OACEM,GAAYN,EAAcH,WACfG,EAAcF,QAAzBQ,CAEJ,IACCE,SAAQ,SAACR,GACR,IACMS,EACJT,EAAcJ,UAAYI,EAAcL,YAI1CnT,EAAOkU,aACLV,EAAcD,SACdC,EAAcA,cAJI,IAAlBS,EAAsB,GAJDH,EAAWN,EAAcL,aAIHc,IAK3C,GACA,EASJ,SAEF,IAAK,IAAMV,KAAYhB,EACjBE,GAAkBc,IAEpBvT,EAAOkU,aAAaX,EAAU,MAIxC,CAUA,SAASd,GAAkBD,GACzB,MACa,WAAXA,GACW,WAAXA,GACW,cAAXA,GACW,mBAAXA,CAEJ,CAiFA,IAAM2B,GAAuB,SAC3BvN,EACAwN,EACAC,GAEA,OAAO,SAAC3K,GACN,IAAM4K,EAAeC,GAAY3N,EAAMwN,EAAI1K,GAC3C,OAAO8K,EAASF,GACZA,EACAD,EAAgBC,GAExB,EAEA,SAASb,GACPF,EACAkB,EACAC,EACA1U,GAEA,IAAM2U,EAAWC,wBAAsBrB,GAEvC,GAAIoB,GAAYA,EAASE,QAAUF,MAAc,CAC/C,IAAMG,EAAkBC,EAAAA,QAAQC,mBAAmBC,kBACjDN,EAASE,QAGX,GAAIC,EAAiB,CACnB,IAAMI,EAASJ,EAAgBI,OACzBC,EAAWD,EAASA,EAAOT,EAAMzU,GAAUyU,EAC3CW,EAAYF,EAASA,EAAOR,EAAO1U,GAAU0U,EAG7CW,EAAoBP,EAAgBQ,MACxCH,EACAC,EACApV,GAEF,GAAIqV,EAAmB,CACrB,IAAME,EAASpB,GAAoB7T,aAAAwG,EAE9BuO,IAEL,OAAO,SAAUvX,GACf,OAAU,IAANA,EAAgB2W,EACV,IAAN3W,EAAgB4W,EACba,EAAOzX,GAElB,CACF,CACF,CAGA,OAAOqW,IAAqB,GAAO,GAAM,SAAUqB,GACjD,OAAOA,EAAOd,EAAQD,CACxB,GACF,CAKA,SAASF,GACP3N,EACAwN,EACA1K,GAEA,GAAoB,iBAAT9C,GAAmC,iBAAPwN,EACrC,OAAOxN,GAAQ,EAAI8C,GAAK0K,EAAK1K,EAE/B,GACmB,kBAAT9C,GAAoC,kBAAPwN,GACpB,iBAATxN,GAAmC,iBAAPwN,EAEpC,MAAW,GAAJ1K,EAAU9C,EAAOwN,EAG1B,GAAI9N,MAAMS,QAAQH,IAASN,MAAMS,QAAQqN,GAAK,CAO5C,IALA,IAAMqB,EAAa7O,EAAKrI,OAClBmX,EAAWtB,EAAG7V,OACdA,EAASyK,KAAKmB,IAAIsL,EAAYC,GAE9B1X,EAAc,GACXD,EAAI,EAAOQ,EAAJR,EAAYA,IAC1BC,EAAEmF,KACAoR,GACE3N,EAAS6O,EAAJ1X,EAAiBA,EAAI0X,EAAa,GACvCrB,EAAOsB,EAAJ3X,EAAeA,EAAI2X,EAAW,GACjChM,IAIN,OAAO1L,CACT,CACA,MAAUyF,MAAK,sCAAAtB,OAAuCyE,EAAI,KAAAzE,OAAIiS,GAChE,CCxPA,IAAauB,GAAqB,WAuEF,OAAA7W,GAvEE,SAAA6W,IAAAxY,OAAAwY,GAChClU,KAGAsP,MAAQ,EAERtP,KAGA0Q,UAA+B,SAE/B1Q,KAGAuK,SAA4B,OAE5BvK,KAGQmU,QAAU,SAAQnU,KAC1B2Q,eAAiBtE,EASjBrM,KAGAuP,SAAW,EAEXvP,KAGA4P,KAAiB,OAEjB5P,KAGA+P,eAAiB,EAEjB/P,KAGA4O,WAAa,EAAC5O,KAsBdmQ,iBAAkC,KAAInQ,KAEtCoL,SAA0B,IAAI,GAAA,CAAA,CAAAhO,IAAA,SAAA+D,IAlD9B,WACE,OAAOnB,KAAKmU,OACb,EAAA5R,IACD,SAAW/C,GACTQ,KAAK2Q,eAAiB5C,GAAoBvO,GAC1CQ,KAAKmU,QAAU3U,CACjB,IAAC,CA3B+B,GC4D3B,SAAS4U,GACdC,EACA3F,GAEA,GAAoB,OAAhB2F,EACF,MAAO,GAGJxP,MAAMS,QAAQ+O,KACjBA,EA1DJ,SAA4BA,GAC1B,IAAMC,EAAoC,GAE1C,IAAK,IAAMxC,KAAYuC,EAErB,KAAIvC,IAAY,CAAC,SAAU,SAAU,cAArC,CAKA,IAAIyC,EAAuCF,EAAYvC,GAClDjN,MAAMS,QAAQiP,KACjBA,EAAS,CAACA,IAIZ,IADA,IAAMC,EAAeD,EAAOzX,OACnBR,EAAI,EAAOkY,EAAJlY,EAAkBA,IAAK,CACrC,IAAKgY,EAAsBhY,GAAI,CAC7B,IAAMmY,EAAqB,CAAA,EACvB,WAAYJ,IACdI,EAASvD,OAAStU,OAAOyX,EAAYnD,SAGnC,WAAYmD,IAEdI,EAASrD,OAASiD,EAAYjD,QAG5B,cAAeiD,IAEjBI,EAASC,UAAYL,EAAYK,WAEnCJ,EAAsBhY,GAAKmY,CAC7B,CAEIF,QAAOjY,KACTgY,EAAsBhY,GAAGwV,GAAYyC,EAAOjY,GAEhD,CA/BA,CAuCF,OALAgY,EAAsBrC,MAAK,SAAUtW,EAAGgO,GACtC,OACIhO,EAAEwV,gBAA6B,IAAOxH,EAAEwH,gBAA6B,EAE3E,IACOmD,CACT,CAWkBK,CAAmBN,IA2DnC,IAxDA,IAAIxD,EAAYwD,EAAYlG,KAAI,SAACyG,GAC/B,IAAMH,EAAqB,CAAA,EAQ3B,IAAK,IAAM1D,KANPrC,SAAAA,EAAQgG,YAGVD,EAASC,UAAY,QAGFE,EAAkB,CACrC,IAAIC,EAAcD,EAAiB7D,GACnC,GAAe,WAAXA,GACF,GAAoB,OAAhB8D,EAAsB,CAExB,IAAKC,SADLD,EAAcjY,OAAOiY,IAEnB,MAAU7S,MAAM,qCAClB,GAAkB,EAAd6S,GAAmBA,EAAc,EACnC,MAAU7S,MAAM,6CAClByS,EAAStD,eAAiB0D,CAC5B,OACK,GAAe,cAAX9D,IAMA,IAFP,CAAC,UAAW,MAAO,aAAc,QAAQtP,QACvCoT,GAGF,MAAU7S,MAAK,GAAAtB,OAAImU,oCAWvBJ,EAAS1D,GAAU8D,CACrB,CAWA,YAVwB3R,IAApBuR,EAASvD,SACXuD,EAASvD,OAAS,WAEIhO,IAApBuR,EAASrD,SAEXqD,EAASrD,QAAS1C,aAAM,EAANA,EAAQ0C,SAAU,eAEXlO,IAAvBuR,EAASC,YACXD,EAASC,UAAY,QAEhBD,CACT,IAEIM,GAAsB,EACtBC,GAAkB/Q,IACb3H,EAAI,EAAOuU,EAAU/T,OAAdR,EAAsBA,IAAK,CACzC,IAAQ4U,EAAWL,EAAUvU,GAArB4U,OACR,GAAK+D,EAAM/D,GAQT6D,GAAsB,MARJ,CAClB,GAAaC,EAAT9D,EACF,MAAM,IAAIrV,UACR,wEAGJmZ,EAAiB9D,CACnB,CAGF,CA+BA,OA7BAL,EAAYA,EAAUyB,QAAO,SAACmC,GAC5B,OAAO7X,OAAO6X,EAASvD,SAAW,GAAgC,GAA3BtU,OAAO6X,EAASvD,OACzD,IAyBK6D,GAvBL,WAA0B,IAAAG,EAKRC,EAJRrY,EAAW+T,EAAX/T,OACR+T,EAAU/T,EAAS,GAAGqU,eAAiBvU,OACTsY,QADeA,EAC3CrE,EAAU/T,EAAS,GAAGoU,cAAMgE,IAAAA,EAAAA,EAAI,GAE9BpY,EAAS,IACX+T,EAAU,GAAGM,eAAiBvU,OAA0B,QAApBuY,EAACtE,EAAU,GAAGK,cAAMiE,IAAAA,EAAAA,EAAI,IAK9D,IAFA,IAAIC,EAAgB,EAChBJ,EAAiBpY,OAAOiU,EAAU,GAAGM,gBAChC7U,EAAI,EAAOQ,EAAJR,EAAYA,IAAK,CAC/B,IAAM4U,EAASL,EAAUvU,GAAG6U,eAC5B,IAAK8D,EAAM/D,KAAY+D,EAAMD,GAAiB,CAC5C,IAAK,IAAIK,EAAI,EAAO/Y,EAAI8Y,EAARC,EAAuBA,IACrCxE,EAAUuE,EAAgBC,GAAGlE,eAC3B6D,GACEpY,OAAOsU,GAAU8D,GAAkBK,GAAM/Y,EAAI8Y,GACnDA,EAAgB9Y,EAChB0Y,EAAiBpY,OAAOsU,EAC1B,CACF,CACF,CAC0BoE,GAEnBzE,CACT,CCxKA,IAAM0E,GAAQ,+BAA+BC,MAAM,KAC7CC,GAAa,sCAAsCD,MAAM,KACxD,SAASE,GACdC,EACAC,GAEA,IAAMlH,EAAS,IAAIwF,GAuCnB,OAtCI0B,IACFlH,EAAOkB,KAAO,OACdlB,EAAOnE,SAAW,QAEO,iBAAhBoL,GAA6BlT,MAAMkT,QAEnBzS,IAAhByS,GACRzY,OAAO2Y,KAAKF,GAAwCpD,SAAQ,SAACT,GAC5D,GACE6D,QAAY7D,IAEc,SAA1B6D,EAAY7D,GACZ,CACA,IAAgC,iBAArBpD,EAAOoD,IAAuC,aAAbA,KAEP,iBAA1B6D,EAAY7D,IACnBrP,MAAMkT,EAAY7D,KAElB,OAGJ,GACe,SAAbA,IAC0C,IAA1CyD,GAAM9T,QAAQkU,EAAY7D,IAE1B,OAEF,GACe,cAAbA,IAC+C,IAA/C2D,GAAWhU,QAAQkU,EAAY7D,IAE/B,OAGFpD,EAAOoD,GAAY6D,EAAY7D,EACjC,CACF,IA/BApD,EAAOnE,SAAWoL,EAiCbjH,CACT,CAEO,SAASoH,GACdH,EACAC,GACA,IAAAG,EAEA,OAAOL,GADPC,EAAcK,GAAiCD,QAAZA,EAACJ,SAAWI,IAAAA,EAAAA,EAAI,CAAExL,SAAU,SAChCqL,EACjC,CAEO,SAASI,GACdL,GASA,MAP2B,iBAAhBA,IAEPA,EADElT,MAAMkT,GACM,CAAEpL,SAAU,QAEZ,CAAEA,SAAUoL,IAGvBA,CACT,CAeaM,IAAAA,GAAc,WAuExB,OAAA5Y,GAtDD,SAAA4Y,EACE1X,EACA8V,EACAsB,GACA,IAAAjX,EAAAsB,KAAAtE,OAAAua,GAAAjW,KApBF0U,UAAgC,UAAS1U,KACzCkW,mBAAkD,UAoBhDlW,KAAKzB,OAASA,EACdyB,KAAK0O,OAASoH,GAAqBH,GAAa,GAChD3V,KAAK0O,OAAO7O,OAASG,KACrBA,KAAK0O,OAAOS,eAAiBV,GAAwBzO,KAAK0O,QAC1D1O,KAAK0O,OAAO3N,QAAUwG,KAAKmB,IACzB,EACA1I,KAAK0O,OAAOY,MAAQtP,KAAK0O,OAAOS,eAAiBnP,KAAK0O,OAAOa,UAG/DvP,KAAKmW,oBAAsB/B,GAAmBC,EAAarU,KAAK0O,QAChE1O,KAAKsR,eAAiBV,GACpB5Q,KAAKmW,oBACLnW,KAAK0O,OACL1O,KAAKzB,QAIP,IAAQ6X,EAAU9C,EAAAA,QAAQ+C,WAAlBD,MACRpW,KAAKsW,eAAiBF,EAClB,IAAIA,EAA6BpW,KAAK0O,OAAQ,CAC5CvN,IAAK,SAAC5C,EAAQgY,GACZ,MAAa,aAATA,EACyB,SAApBhY,EAAOgM,SAAsB,EAAIhM,EAAOgM,SAEpC,SAATgM,EACqB,SAAhBhY,EAAOqR,KAAkB,OAASrR,EAAOqR,KAErC,cAAT2G,EACM7X,EAAK8B,WAAa9B,EAAK8B,UAAUhC,aAAgB,KAE9C,qBAAT+X,EACG7X,EAAK8B,WAA0C,YAA7B9B,EAAK8B,UAAU8B,UAG/B/D,EAAO4R,kBAAoB,EAFzB,KAIE,aAAToG,EACG7X,EAAK8B,WAA0C,YAA7B9B,EAAK8B,UAAU8B,UAG/B/D,EAAO6M,UAAY,EAFjB,KAIJ7M,EAAOgY,EACf,EACDhU,IAAK,WACH,OAAO,CACT,IAEFvC,KAAK0O,MACX,GAAC,CAAA,CAAAtR,IAAA,sBAAAoC,MAED,WACEQ,KAAKsR,eACHtR,KAAKzB,OACL3B,OAAOoD,KAAKwW,cAEhB,GAAC,CAAApZ,IAAA,SAAAoC,MAED,SAAO4P,GACL,OAAkB,OAAdA,IAGJpP,KAAKwW,aAAetH,GAClBlP,KAAK0O,OAAOS,eACZC,EACApP,KAAK0O,QAEsB,OAAtB1O,KAAKwW,aACd,GAAC,CAAApZ,IAAA,eAAAoC,MAED,WACE,OAAOQ,KAAKmW,mBACd,GAAC,CAAA/Y,IAAA,eAAAoC,MACD,SAAaqR,GACX7Q,KAAKmW,oBAAsB/B,GAAmBvD,EAChD,GACA,CAAAzT,IAAA,oBAAAoC,MAGA,WACE,OAAOQ,KAAKsW,cACd,GACA,CAAAlZ,IAAA,YAAAoC,MAGA,WACE,OAAOQ,KAAK0O,MACd,GACA,CAAAtR,IAAA,eAAAoC,MAGA,SAAakP,GAAqC,IAAAxM,EAAAlC,KAChD9C,OAAO2Y,KAAKnH,GAAU,CAAE,GAAE6D,SAAQ,SAACrN,GACjChD,EAAKwM,OAAOxJ,GAAQwJ,EAAOxJ,EAC7B,GACF,IAAC,CArHwB,GCnFpB,SAASuR,GACdC,EACAC,GAEA,OAAO/Z,OAAO8Z,EAAcjW,IAAM7D,OAAO+Z,EAAelW,GAC1D,CAKamW,IAAAA,GAAiB,WAyBe,OAAAvZ,GAA3C,SAAAuZ,EAAoBC,GAAqB,IAAAnY,EAAAsB,KAAAtE,OAAAkb,GAxBzC5W,KAGAoD,WAA0B,GAAEpD,KAEpB8W,SAAU,EAAK9W,KAEf+W,iBAAkB,EAAK/W,KAEvBgX,uBAAwB,EAAKhX,KAErCwB,uBAAsC,GAAExB,KAEhCiX,QAAS,EAAKjX,KAEdkX,eAA4C,GAAElX,KAEtDxB,YAA6B,KAAIwB,KAEzBmX,MAAQ,EAACnX,KACToX,aAAgD,GAAEpX,KAsGlDqX,sBAAwB,SAAChb,GAC/BqC,EAAKF,YAAcnC,EACnBqC,EAAK4Y,oBAC0B,IAA3B5Y,EAAK0E,WAAWtG,OAClB4B,EAAKqY,iBAAkB,EAEvBrY,EAAK6Y,sBAAsB7Y,EAAK2Y,wBAEnCrX,KAEOwX,oBAAsB,SAACnb,GAC7B,IAAMob,EAAa/Y,EAAK0Y,aACxB1Y,EAAK0Y,aAAe,GACZxa,OAAO8B,EAAKF,aAAhBnC,IAA8BA,EAAIO,OAAO8B,EAAKF,cAClDE,EAAK0E,WAAW6O,KAAKwE,IACrB/X,EAAK0E,WAAa1E,EAAKgZ,KAAKrb,GAAG,EAAMqC,EAAK0E,YAAY,GACtDqU,EAAWlF,SAAQ,SAACoF,GAClBA,EAAM,GAAGtb,EACX,IACAqC,EAAKkZ,uBACN5X,KAtHmB6W,SAAAA,CAAsB,GAAC,CAAA,CAAAzZ,IAAA,gBAAAoC,MAE3C,WAEE,OADAQ,KAAKsX,oBACEtX,KAAKoD,WAAW6B,OACzB,GAAC,CAAA7H,IAAA,YAAAoC,MAED,WACE,OAAOQ,KAAKiX,MACd,GAAC,CAAA7Z,IAAA,OAAAoC,MAED,SACEjB,EACAsS,EACAzM,GAEA,IAAMvE,EAAS,IAAIoW,GAAe1X,EAAQsS,EAAWzM,GAC/C5D,EAAY,IAAIZ,EAAUC,EAAQG,MAMxC,OALAA,KAAKoD,WAAW1B,KAAKlB,GACrBR,KAAK6X,+BACLrX,EAAUU,iBACVV,EAAUiD,OACVjD,EAAUU,iBACHV,CACT,GAKA,CAAApD,IAAA,wBAAAoC,MACA,SAAsBgB,GAAsB,IAAA0B,EAAAlC,KAC1C,IAAIA,KAAKiX,OAAT,CAIAzW,EAAUsX,aACV,IAAM1U,EAAa5C,EAAUoD,mBAC7BR,EAAW6O,KAAKwE,IAGWzW,KAAK0X,KAC9B9a,OAAOoD,KAAKxB,cACZ,EACA4E,EAAW6B,SACX,GACiBsN,SAAQ,SAAC/R,GAC1B,IAAMqD,EAAQ3B,EAAKkB,WAAW3B,QAAQjB,IACvB,IAAXqD,GACF3B,EAAKkB,WAAWU,OAAOD,EAAO,EAElC,IACA7D,KAAK4X,qBAlBL,CAmBF,GAAC,CAAAxa,IAAA,UAAAoC,MAED,WAME,OALKQ,KAAK8W,UACR9W,KAAK8W,SAAU,EACf9W,KAAKuX,uBAAsB,WAAM,IACjCvX,KAAKgX,uBAAwB,GAExBhX,KAAKgX,qBACd,GAAC,CAAA5Z,IAAA,UAAAoC,MAED,WACEQ,KAAK6W,SAASkB,YAAYC,qBAAqBhY,KAAKiY,QACtD,GAAC,CAAA7a,IAAA,sBAAAoC,MAED,WACEQ,KAAKkX,eAAe3E,SAAQ,SAAC1S,GAC3BA,SAAAA,EAAQqY,qBACV,IACAlY,KAAKkX,eAAiB,EACxB,GAAC,CAAA9Z,IAAA,2BAAAoC,MAED,WACEQ,KAAKwB,uBAAyBxB,KAAKwB,uBAAuB8Q,QACxD,SAAC9R,GACC,OAAOA,EAAUU,gBACnB,GAEJ,GAAC,CAAA9D,IAAA,oBAAAoC,MAED,WACEQ,KAAKmY,2BACLnY,KAAKoD,WAAapD,KAAKoD,WAAWkP,QAAO,SAAC9R,GACxC,MAC0B,aAAxBA,EAAU8B,WAAoD,SAAxB9B,EAAU8B,SAEpD,GACF,GAAC,CAAAlF,IAAA,+BAAAoC,MAED,WACOQ,KAAK+W,kBACR/W,KAAK+W,iBAAkB,EACvB/W,KAAKuX,sBAAsBvX,KAAKqX,uBAEpC,GAAC,CAAAja,IAAA,MAAAoC,MAwBD,SAAYyI,GACV,IAAMxH,EAAKT,KAAKmX,QAOhB,OANiC,IAA7BnX,KAAKoX,aAAata,SACpBkD,KAAKiY,QAAUjY,KAAK6W,SAASkB,YAAYR,sBACvCvX,KAAKwX,sBAGTxX,KAAKoX,aAAa1V,KAAK,CAACjB,EAAIwH,IACrBxH,CACT,GAAC,CAAArD,IAAA,wBAAAoC,MAED,SAA8ByI,GAAyB,IAAA5E,EAAArD,KACrD,OAAOA,KAAKoY,KAAI,SAAClL,GACf7J,EAAK8U,2BACLlQ,EAAEiF,GACF7J,EAAK8U,0BACP,GACF,GAAC,CAAA/a,IAAA,OAAAoC,MAED,SAAKnD,EAAW0H,EAA2BsU,GAAkC,IAAAC,EAAAC,EAAA9T,EAAAzE,KAC3EA,KAAKiX,QAAS,EACdjX,KAAKgX,uBAAwB,EAE7BhX,KAAKxB,YAAcnC,EACnB2D,KAAK8W,SAAU,EAEf,IAAM0B,EAA8C,GAC9CC,EAA+C,GAC/CC,EAAgC,GAChCC,EAAkC,GA8BxC,OA5BCN,EAA8C9F,SAAQ,SAAC/R,GACtDA,EAAUkX,KAAKrb,EAAG0H,GAEbvD,EAAUG,WAIb8X,EAAkB/W,KAAKlB,EAAUX,QACjCW,EAAUsX,eAJVU,EAAiB9W,KAAKlB,EAAUX,QAChCW,EAAUoY,gBAMRpY,EAAUqY,aAAYpU,EAAKqS,SAAU,GAEzC,IAAMgC,EAAQtY,EAAUG,WAAaH,EAAUqY,WAC/CrY,EAAUD,YAAcuY,EACpBA,EACFJ,EAAiBhX,KAAKlB,GAEtBmY,EAAmBjX,KAAKlB,EAE5B,KAEA8X,EAAAtY,KAAKkX,gBAAexV,KAAI7C,MAAAyZ,EAAIE,IAC5BD,EAAAvY,KAAKkX,gBAAexV,KAAI7C,MAAA0Z,EAAIE,GAExBzY,KAAK8W,SAAS9W,KAAKuX,uBAAsB,WAAQ,IAErDvX,KAAKiX,QAAS,EACP,CAACyB,EAAkBC,EAC5B,IAAC,CA7M2B,GCZ9BrF,EAAAA,QAAQyF,eAAiBhL,GAClBiL,EAAA1F,QAACsD,kBAAoBA","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,11,12,14,15,16,17,18,19,21,22,23,24,25,26,27,28]}