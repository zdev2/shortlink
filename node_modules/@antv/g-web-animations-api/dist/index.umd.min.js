/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.2
 * @date 10/23/2024, 11:15:27 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],i):i(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.WebAnimationsAPI={}),t.window.G)}(this,(function(t,i){"use strict";function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t){var i=function(t,i){if("object"!=n(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,i||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}function s(t,i){for(var e=0;i.length>e;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function a(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function f(t,i){if(i&&("object"==n(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function c(t,i){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},c(t,i)}var h=function(t){function i(t,n,r,s){var a,c,h,l;return e(this,i),c=this,l=[t],h=o(h=i),(a=f(c,u()?Reflect.construct(h,l||[],o(c).constructor):h.apply(c,l))).currentTime=r,a.timelineTime=s,a.target=n,a.type="finish",a.bubbles=!1,a.currentTarget=n,a.defaultPrevented=!1,a.eventPhase=a.AT_TARGET,a.timeStamp=Date.now(),a.currentTime=r,a.timelineTime=s,a}return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&c(t,i)}(i,t),a(i)}(i.FederatedEvent),l=0,m=function(){return a((function t(i,n){var r;e(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=i,i.animation=this,this.timeline=n,this.id="".concat(l++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number(null===(r=this.effect)||void 0===r?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}),[{key:"pending",get:function(){return null===this._startTime&&!this._paused&&0!==this.playbackRate||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var t=this;return this.readyPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise((function(i,e){t.resolveReadyPromise=function(){i(t)},t.rejectReadyPromise=function(){e(Error())}})),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var t=this;return this.finishedPromise||(-1===this.timeline.animationsWithPromises.indexOf(this)&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise((function(i,e){t.resolveFinishedPromise=function(){i(t)},t.rejectFinishedPromise=function(){e(Error())}})),"finished"===this.playState&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(t){if(!isNaN(t=Number(t))){var i;if(this.timeline.restart(),!this._paused&&null!==this._startTime)this._startTime=Number(null===(i=this.timeline)||void 0===i?void 0:i.currentTime)-t/this.playbackRate;this.currentTimePending=!1,this._currentTime!==t&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(t,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(t){if(null!==t){if(this.updatePromises(),isNaN(t=Number(t)))return;if(this._paused||this._idle)return;this._startTime=t,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(t){if(t!==this._playbackRate){this.updatePromises();var i=this.currentTime;this._playbackRate=t,this.startTime=null,"paused"!==this.playState&&"idle"!==this.playState&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),null!==i&&(this.currentTime=i),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||0>this._playbackRate&&0>=Number(this._currentTime))}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||"running"===this.playState||!this._finishedFlag}},{key:"updatePromises",value:function(){var t=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==t&&("idle"===i?(this.rejectReadyPromise(),this.readyPromise=void 0):"pending"===t?this.resolveReadyPromise():"pending"===i&&(this.readyPromise=void 0)),this.finishedPromise&&i!==t&&("idle"===i?(this.rejectFinishedPromise(),this.finishedPromise=void 0):"finished"===i?this.resolveFinishedPromise():"finished"===t&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),-1===this.timeline.animations.indexOf(this)&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),this._isFinished||this._paused||this._idle?this._idle&&(this.rewind(),this._idle=!1):this.currentTimePending=!0,this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),this._idle||(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var t=this;if(this.updatePromises(),this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var i=new h(null,this,this.currentTime,null);setTimeout((function(){t.oncancel(i)}))}}},{key:"reverse",value:function(){this.updatePromises();var t=this.currentTime;this.playbackRate*=-1,this.play(),null!==t&&(this.currentTime=t),this.updatePromises()}},{key:"updatePlaybackRate",value:function(t){this.playbackRate=t}},{key:"targetAnimations",value:function(){var t;return(null===(t=this.effect)||void 0===t?void 0:t.target).getAnimations()}},{key:"markTarget",value:function(){var t=this.targetAnimations();-1===t.indexOf(this)&&t.push(this)}},{key:"unmarkTarget",value:function(){var t=this.targetAnimations(),i=t.indexOf(this);-1!==i&&t.splice(i,1)}},{key:"tick",value:function(t,i){this._idle||this._paused||(null===this._startTime?i&&(this.startTime=t-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((t-this._startTime)*this.playbackRate)),i&&(this.currentTimePending=!1,this.fireEvents(t))}},{key:"rewind",value:function(){if(this.playbackRate<0){if(this._totalDuration>=1/0)throw Error("Unable to rewind negative playback rate animation with infinite duration");this.currentTime=this._totalDuration}else this.currentTime=0}},{key:"persist",value:function(){throw Error(i.ERROR_MSG_METHOD_NOT_IMPLEMENTED)}},{key:"addEventListener",value:function(t,e,n){throw Error(i.ERROR_MSG_METHOD_NOT_IMPLEMENTED)}},{key:"removeEventListener",value:function(t,e,n){throw Error(i.ERROR_MSG_METHOD_NOT_IMPLEMENTED)}},{key:"dispatchEvent",value:function(t){throw Error(i.ERROR_MSG_METHOD_NOT_IMPLEMENTED)}},{key:"commitStyles",value:function(){throw Error(i.ERROR_MSG_METHOD_NOT_IMPLEMENTED)}},{key:"ensureAlive",value:function(){var t,i;0>this.playbackRate&&0===this.currentTime?this._inEffect=!(null===(t=this.effect)||void 0===t||!t.update(-1)):this._inEffect=!(null===(i=this.effect)||void 0===i||!i.update(this.currentTime));this._inTimeline||!this._inEffect&&this._finishedFlag||(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(t,i){t!==this._currentTime&&(this._currentTime=t,this._isFinished&&!i&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(t){var i=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var e=new h(null,this,this.currentTime,t);setTimeout((function(){i.onfinish&&i.onfinish(e)}))}this._finishedFlag=!0}}else{if(this.onframe&&"running"===this.playState){var n=new h(null,this,this.currentTime,t);this.onframe(n)}this._finishedFlag=!1}}}])}();function d(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=Array(i);i>e;e++)n[e]=t[e];return n}function p(t,i){if(t){if("string"==typeof t)return d(t,i);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,i):void 0}}function y(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=.1,g="function"==typeof Float32Array,b=function(t,i){return 1-3*i+3*t},T=function(t,i){return 3*i-6*t},_=function(t){return 3*t},k=function(t,i,e){return((b(i,e)*t+T(i,e))*t+_(i))*t},P=function(t,i,e){return 3*b(i,e)*t*t+2*T(i,e)*t+_(i)},E=function(t,i,e,n){if(0>t||t>1||0>e||e>1)throw Error("bezier x values must be in [0, 1] range");if(t===i&&e===n)return function(t){return t};for(var r=g?new Float32Array(11):[,,,,,,,,,,,],s=0;11>s;++s)r[s]=k(s*v,t,e);var a=function(i){for(var n=0,s=1;10!==s&&i>=r[s];++s)n+=v;--s;var a=n+(i-r[s])/(r[s+1]-r[s])*v,o=P(a,t,e);return.001>o?0===o?a:function(t,i,e,n,r){var s,a,o=0;do{(s=k(a=i+(e-i)/2,n,r)-t)>0?e=a:i=a}while(Math.abs(s)>1e-7&&10>++o);return a}(i,n,n+v,t,e):function(t,i,e,n){for(var r=0;4>r;++r){var s=P(i,e,n);if(0===s)return i;i-=(k(i,e,n)-t)/s}return i}(i,a,t,e)};return function(t){return 0===t||1===t?t:k(a(t),i,n)}};function w(t,i){return function(t){if(Array.isArray(t))return t}(t)||function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,r,s,a,o=[],u=!0,f=!1;try{if(s=(e=e.call(t)).next,0===i){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=s.call(e)).done)&&(o.push(n.value),o.length!==i);u=!0);}catch(t){f=!0,r=t}finally{try{if(!u&&null!=e.return&&(a=e.return(),Object(a)!==a))return}finally{if(f)throw r}}return o}}(t,i)||p(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(t){return null==t},O={}.toString,M=function(t,i){return O.call(t)==="[object "+i+"]"},N=function(t,i,e){return i>t?i:t>e?e:t},F=function(t){return M(t,"Number")},R=function(t){return Math.pow(t,2)},S=function(t){return Math.pow(t,3)},x=function(t){return Math.pow(t,4)},D=function(t){return Math.pow(t,5)},j=function(t){return Math.pow(t,6)},I=function(t){return 1-Math.cos(t*Math.PI/2)},q=function(t){return 1-Math.sqrt(1-t*t)},C=function(t){return t*t*(3*t-2)},K=function(t){for(var i,e=4;t<((i=Math.pow(2,--e))-1)/11;);return 1/Math.pow(4,3-e)-7.5625*Math.pow((3*i-2)/22-t,2)},G=function(t){var i=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),e=i[0],n=i[1],r=void 0===n?.5:n,s=N(Number(void 0===e?1:e),1,10),a=N(Number(r),.1,2);return 0===t||1===t?t:-s*Math.pow(2,10*(t-1))*Math.sin(2*Math.PI*(t-1-a/(2*Math.PI)*Math.asin(1/s))/a)},W=function(t){var i=arguments.length>2?arguments[2]:void 0,e=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4),n=e[0],r=void 0===n?1:n,s=e[1],a=void 0===s?100:s,o=e[2],u=void 0===o?10:o,f=e[3],c=void 0===f?0:f;r=N(r,.1,1e3),a=N(a,.1,1e3),u=N(u,.1,1e3),c=N(c,.1,1e3);var h=Math.sqrt(a/r),l=u/(2*Math.sqrt(a*r)),m=1>l?h*Math.sqrt(1-l*l):0,d=1>l?(l*h-c)/m:-c+h,p=i?i*t/1e3:t;return p=1>l?Math.exp(-p*l*h)*(1*Math.cos(m*p)+d*Math.sin(m*p)):(1+d*p)*Math.exp(-p*h),0===t||1===t?t:1-p},z=function(t){var i=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],2),e=i[0],n=void 0===e?10:e;return("start"===i[1]?Math.ceil:Math.floor)(N(t,0,1)*n)/n},L=function(t){var i=w(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],4);return E(i[0],i[1],i[2],i[3])(t)},H=E(.42,0,1,1),V=function(t){return function(i){return 1-t(1-i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],arguments.length>2?arguments[2]:void 0)}},B=function(t){return function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return.5>i?t(2*i,e,n)/2:1-t(-2*i+2,e,n)/2}},U=function(t){return function(i){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return.5>i?(1-t(1-2*i,e,n))/2:(t(2*i-1,e,n)+1)/2}},Z={steps:z,"step-start":function(t){return z(t,[1,"start"])},"step-end":function(t){return z(t,[1,"end"])},linear:function(t){return t},"cubic-bezier":L,ease:function(t){return L(t,[.25,.1,.25,1])},in:H,out:V(H),"in-out":B(H),"out-in":U(H),"in-quad":R,"out-quad":V(R),"in-out-quad":B(R),"out-in-quad":U(R),"in-cubic":S,"out-cubic":V(S),"in-out-cubic":B(S),"out-in-cubic":U(S),"in-quart":x,"out-quart":V(x),"in-out-quart":B(x),"out-in-quart":U(x),"in-quint":D,"out-quint":V(D),"in-out-quint":B(D),"out-in-quint":U(D),"in-expo":j,"out-expo":V(j),"in-out-expo":B(j),"out-in-expo":U(j),"in-sine":I,"out-sine":V(I),"in-out-sine":B(I),"out-in-sine":U(I),"in-circ":q,"out-circ":V(q),"in-out-circ":B(q),"out-in-circ":U(q),"in-back":C,"out-back":V(C),"in-out-back":B(C),"out-in-back":U(C),"in-bounce":K,"out-bounce":V(K),"in-out-bounce":B(K),"out-in-bounce":U(K),"in-elastic":G,"out-elastic":V(G),"in-out-elastic":B(G),"out-in-elastic":U(G),spring:W,"spring-in":W,"spring-out":V(W),"spring-in-out":B(W),"spring-out-in":U(W)},$=function(t){return Z[function(t){return(i=t,"-"===(i=i.replace(/([A-Z])/g,(function(t){return"-".concat(t.toLowerCase())}))).charAt(0)?i.substring(1):i).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim();var i}(t)]||Z.linear},J=function(t){return t},Q=1,X=.5,Y=0;function tt(t,i){return function(e){if(e>=1)return 1;var n=1/t;return(e+=i*n)-e%n}}var it="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",et=RegExp("cubic-bezier\\(".concat(it,",").concat(it,",").concat(it,",").concat(it,"\\)")),nt=/steps\(\s*(\d+)\s*\)/,rt=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function st(t){var i=et.exec(t);if(i)return E.apply(void 0,y(i.slice(1).map(Number)));var e=nt.exec(t);if(e)return tt(Number(e[1]),Y);var n=rt.exec(t);return n?tt(Number(n[1]),{start:Q,middle:X,end:Y}[n[2]]):$(t)}function at(t){return Math.abs(function(t){var i;if(0===t.duration||0===t.iterations)return 0;return("auto"===t.duration?0:Number(t.duration))*(null!==(i=t.iterations)&&void 0!==i?i:1)}(t)/(t.playbackRate||1))}var ot=0,ut=1,ft=2,ct=3;function ht(t,i,e){var n=function(t,i,e){if(null===i)return ot;var n=e.endTime;return Math.min(e.delay,n)>i?ut:Math.min(e.delay+t+e.endDelay,n)>i?ct:ft}(t,i,e),r=function(t,i,e,n,r){switch(n){case ut:return"backwards"===i||"both"===i?0:null;case ct:return e-r;case ft:return"forwards"===i||"both"===i?t:null;case ot:return null}}(t,e.fill,i,n,e.delay);if(null===r)return null;var s="auto"===e.duration?0:e.duration,a=function(t,i,e,n,r){var s=r;return 0===t?i!==ut&&(s+=e):s+=n/t,s}(s,n,e.iterations,r,e.iterationStart),o=function(t,i,e,n,r,s){var a=t===1/0?i%1:t%1;return 0!==a||e!==ft||0===n||0===r&&0!==s||(a=1),a}(a,e.iterationStart,n,e.iterations,r,s),u=function(t,i,e,n){return t===ft&&i===1/0?1/0:1===e?Math.floor(n)-1:Math.floor(n)}(n,e.iterations,o,a),f=function(t,i,e){var n=t;if("normal"!==t&&"reverse"!==t){var r=i;"alternate-reverse"===t&&(r+=1),n="normal",r!==1/0&&r%2!=0&&(n="reverse")}return"normal"===n?e:1-e}(e.direction,u,o);return e.currentIteration=u,e.progress=f,e.easingFunction(f)}function lt(t,i,e){var n=function(t,i){for(var e={},n=0;t.length>n;n++)for(var r in t[n])if(mt(r)){var s={offset:t[n].offset,computedOffset:t[n].computedOffset,easing:t[n].easing,easingFunction:st(t[n].easing)||i.easingFunction,value:t[n][r]};e[r]=e[r]||[],e[r].push(s)}return e}(t,i),r=function(t,i){var e=[];for(var n in t)for(var r=t[n],s=0;r.length-1>s;s++){var a=s,o=s+1,u=r[a].computedOffset,f=r[o].computedOffset,c=u,h=f;0===s&&(c=-1/0,0===f&&(o=a)),s===r.length-2&&(h=1/0,1===u&&(a=o)),e.push({applyFrom:c,applyTo:h,startOffset:r[a].computedOffset,endOffset:r[o].computedOffset,easingFunction:r[a].easingFunction,property:n,interpolation:pt(n,r[a].value,r[o].value,i)})}return e.sort((function(t,i){return t.startOffset-i.startOffset})),e}(n,e);return function(t,i){if(null!==i)r.filter((function(t){return i>=t.applyFrom&&t.applyTo>i})).forEach((function(e){var n=e.endOffset-e.startOffset;t.setAttribute(e.property,e.interpolation(0===n?0:(i-e.startOffset)/n),!1,!1)}));else for(var e in n)mt(e)&&t.setAttribute(e,null)}}function mt(t){return"offset"!==t&&"easing"!==t&&"composite"!==t&&"computedOffset"!==t}var dt=function(t,i,e){return function(n){var r=yt(t,i,n);return F(r)?r:e(r)}};function pt(t,e,n,r){var s=i.propertyMetadataCache[t];if(s&&s.syntax&&s.int){var a=i.runtime.styleValueRegistry.getPropertySyntax(s.syntax);if(a){var o=a.parser,u=o?o(e,r):e,f=o?o(n,r):n,c=a.mixer(u,f,r);if(c){var h=dt.apply(void 0,y(c));return function(t){return 0===t?e:1===t?n:h(t)}}}}return dt(!1,!0,(function(t){return t?n:e}))}function yt(t,i,e){if("number"==typeof t&&"number"==typeof i)return t*(1-e)+i*e;if("boolean"==typeof t&&"boolean"==typeof i||"string"==typeof t&&"string"==typeof i)return.5>e?t:i;if(Array.isArray(t)&&Array.isArray(i)){for(var n=t.length,r=i.length,s=Math.max(n,r),a=[],o=0;s>o;o++)a.push(yt(t[n>o?o:n-1],i[r>o?o:r-1],e));return a}throw Error("Mismatched interpolation arguments ".concat(t,":").concat(i))}var vt=function(){return a((function t(){e(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=J,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}),[{key:"easing",get:function(){return this._easing},set:function(t){this.easingFunction=st(t),this._easing=t}}])}();function gt(t,i){if(null===t)return[];Array.isArray(t)||(t=function(t){var i=[];for(var e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var r=n.length,s=0;r>s;s++){if(!i[s]){var a={};"offset"in t&&(a.offset=Number(t.offset)),"easing"in t&&(a.easing=t.easing),"composite"in t&&(a.composite=t.composite),i[s]=a}null!=n[s]&&(i[s][e]=n[s])}}return i.sort((function(t,i){return(t.computedOffset||0)-(i.computedOffset||0)})),i}(t));for(var e=t.map((function(t){var e={};for(var n in null!=i&&i.composite&&(e.composite="auto"),t){var r=t[n];if("offset"===n){if(null!==r){if(!isFinite(r=Number(r)))throw Error("Keyframe offsets must be numbers.");if(0>r||r>1)throw Error("Keyframe offsets must be between 0 and 1.");e.computedOffset=r}}else if("composite"===n&&-1===["replace","add","accumulate","auto"].indexOf(r))throw Error("".concat(r," compositing is not supported"));e[n]=r}return void 0===e.offset&&(e.offset=null),void 0===e.easing&&(e.easing=(null==i?void 0:i.easing)||"linear"),void 0===e.composite&&(e.composite="auto"),e})),n=!0,r=-1/0,s=0;e.length>s;s++){var a=e[s].offset;if(A(a))n=!1;else{if(r>a)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");r=a}}return e=e.filter((function(t){return Number(t.offset)>=0&&1>=Number(t.offset)})),n||function(){var t,i,n=e.length;e[n-1].computedOffset=Number(null!==(t=e[n-1].offset)&&void 0!==t?t:1),n>1&&(e[0].computedOffset=Number(null!==(i=e[0].offset)&&void 0!==i?i:0));for(var r=0,s=Number(e[0].computedOffset),a=1;n>a;a++){var o=e[a].computedOffset;if(!A(o)&&!A(s)){for(var u=1;a-r>u;u++)e[r+u].computedOffset=s+(Number(o)-s)*u/(a-r);r=a,s=Number(o)}}}(),e}var bt="backwards|forwards|both|none".split("|"),Tt="reverse|alternate|alternate-reverse".split("|");function _t(t,i){var e=new vt;return i&&(e.fill="both",e.duration="auto"),"number"!=typeof t||isNaN(t)?void 0!==t&&Object.keys(t).forEach((function(i){if(null!=t[i]&&"auto"!==t[i]){if(("number"==typeof e[i]||"duration"===i)&&("number"!=typeof t[i]||isNaN(t[i])))return;if("fill"===i&&-1===bt.indexOf(t[i]))return;if("direction"===i&&-1===Tt.indexOf(t[i]))return;e[i]=t[i]}})):e.duration=t,e}function kt(t,i){var e;return _t(t=Pt(null!==(e=t)&&void 0!==e?e:{duration:"auto"}),i)}function Pt(t){return"number"==typeof t&&(t=isNaN(t)?{duration:"auto"}:{duration:t}),t}var Et=function(){return a((function t(n,r,s){var a=this;e(this,t),this.composite="replace",this.iterationComposite="replace",this.target=n,this.timing=kt(s,!1),this.timing.effect=this,this.timing.activeDuration=at(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=gt(r,this.timing),this.interpolations=lt(this.normalizedKeyframes,this.timing,this.target);var o=i.runtime.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(t,i){return"duration"===i?"auto"===t.duration?0:t.duration:"fill"===i?"auto"===t.fill?"none":t.fill:"localTime"===i?a.animation&&a.animation.currentTime||null:"currentIteration"===i?a.animation&&"running"===a.animation.playState?t.currentIteration||0:null:"progress"===i?a.animation&&"running"===a.animation.playState?t.progress||0:null:t[i]},set:function(){return!0}}):this.timing}),[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(t){return null!==t&&(this.timeFraction=ht(this.timing.activeDuration,t,this.timing),null!==this.timeFraction)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(t){this.normalizedKeyframes=gt(t)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(t){var i=this;Object.keys(t||{}).forEach((function(e){i.timing[e]=t[e]}))}}])}();function wt(t,i){return Number(t.id)-Number(i.id)}var At=function(){return a((function t(i){var n=this;e(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(t){n.currentTime=t,n.discardAnimations(),0===n.animations.length?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(t){var i=n.rafCallbacks;n.rafCallbacks=[],Number(n.currentTime)>t&&(t=Number(n.currentTime)),n.animations.sort(wt),n.animations=n.tick(t,!0,n.animations)[0],i.forEach((function(i){i[1](t)})),n.applyPendingEffects()},this.document=i}),[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(t,i,e){var n=new Et(t,i,e),r=new m(n,this);return this.animations.push(r),this.restartWebAnimationsNextTick(),r.updatePromises(),r.play(),r.updatePromises(),r}},{key:"applyDirtiedAnimation",value:function(t){var i=this;if(!this.inTick){t.markTarget();var e=t.targetAnimations();e.sort(wt),this.tick(Number(this.currentTime),!1,e.slice())[1].forEach((function(t){var e=i.animations.indexOf(t);-1!==e&&i.animations.splice(e,1)})),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame((function(){})),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach((function(t){null==t||t.applyInterpolations()})),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter((function(t){return t.updatePromises()}))}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter((function(t){return"finished"!==t.playState&&"idle"!==t.playState}))}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(t){var i=this.rafId++;return 0===this.rafCallbacks.length&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([i,t]),i}},{key:"requestAnimationFrame",value:function(t){var i=this;return this.rAF((function(e){i.updateAnimationsPromises(),t(e),i.updateAnimationsPromises()}))}},{key:"tick",value:function(t,i,e){var n,r,s=this;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=t,this.ticking=!1;var a=[],o=[],u=[],f=[];return e.forEach((function(e){e.tick(t,i),e._inEffect?(o.push(e.effect),e.markTarget()):(a.push(e.effect),e.unmarkTarget()),e._needsTick&&(s.ticking=!0);var n=e._inEffect||e._needsTick;e._inTimeline=n,n?u.push(e):f.push(e)})),(n=this.pendingEffects).push.apply(n,a),(r=this.pendingEffects).push.apply(r,o),this.ticking&&this.requestAnimationFrame((function(){})),this.inTick=!1,[u,f]}}])}();i.runtime.EasingFunction=st,i.runtime.AnimationTimeline=At,t.Animation=m,t.AnimationEvent=h,t.AnimationTimeline=At,t.EasingFunctions=Z,t.KeyframeEffect=Et,t.compareAnimations=wt,t.makeTiming=_t,t.normalizeKeyframes=gt,t.normalizeTimingInput=kt,t.numericTimingToObject=Pt}));
//# sourceMappingURL=index.umd.min.js.map
